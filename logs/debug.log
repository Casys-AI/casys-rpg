2024-12-29 16:51:22 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:25 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 16:51:25 | INFO     | __main__:<module>:39 - Démarrage du serveur sur 127.0.0.1:8000
2024-12-29 16:51:25 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:27 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:27 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 16:52:05 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 16:52:05 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 16:52:05 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 16:52:05 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 16:52:05 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 16:52:05 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 16:52:05 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 16:52:05 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 16:52:05 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 16:52:05 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 16:52:05 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 16:52:05 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 16:52:05 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 16:52:07 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 16:52:07 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 16:52:07 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 16:52:07 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 16:52:07 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 16:52:07 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 16:52:07 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-29 16:52:07 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-29 16:52:07 | INFO     | agents.story_graph:_setup_workflow:67 - Setting up LangGraph workflow with parallel processing
2024-12-29 16:52:07 | SUCCESS  | agents.story_graph:_setup_workflow:92 - Workflow setup completed
2024-12-29 16:52:07 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\traces
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters
2024-12-29 16:52:07 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | INFO     | managers.state_manager:create_initial_state:346 - Creating initial state with session_id: 84fbc3f7-f1f7-4935-8c10-4d390315dd1d
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:create_initial_state:373 - Parameters for initial GameState: {'section_number': 1, 'session_id': '84fbc3f7-f1f7-4935-8c10-4d390315dd1d', 'game_id': '6ad21134-3127-484c-afb4-2c94a160218e', 'last_update': '2024-12-29T16:52:07.161048', 'character_id': 'current'}
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 16:52:07 | INFO     | managers.state_manager:create_initial_state:346 - Creating initial state with session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:create_initial_state:373 - Parameters for initial GameState: {'section_number': 1, 'session_id': '59e368ae-91fd-4a93-b99b-f426e23fd83f', 'game_id': '6ad21134-3127-484c-afb4-2c94a160218e', 'last_update': '2024-12-29T16:52:07.210195', 'character_id': 'current'}
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f and game_id: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f and section_number: 1
2024-12-29 16:52:07 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 16:52:07 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 16:52:07 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 16:52:07 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procédure d'évasion'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procédure d'évasion'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 16:52:07 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 16:52:07 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 16:52:07 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 16:52:07 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-29 16:52:07 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 16:52:07 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 16:52:07 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
