2025-01-13 11:32:19 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2025-01-13 11:32:19 | DEBUG    | managers.dependencies:get_agent_manager:81 - Returning existing AgentManager instance
2025-01-13 11:32:19 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2025-01-13 11:32:19 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2025-01-13 11:32:19 | DEBUG    | managers.agent_manager:get_state:107 - Fetching current game state
2025-01-13 11:32:19 | DEBUG    | managers.agent_manager:get_state:109 - Current state: session_id='b865d863-053f-4e02-a4d3-90ffcb421a3e' game_id='33f056e4-e680-4f51-ab20-330df3d1ec3b' metadata={'node': 'start'} should_continue=False narrative=NarratorModel(section_number=246, content="# Section 246\n\n— Votre Excellence, bredouillez-vous d'une pauvre voix, je ne pouvais supposer... je veux dire qu'il ne m'est pas venu à l'idée que ce vaisseau pouvait être piloté par l'un des glorieux maîtres du noble Empire arcadien. Mon unique désir est de servir Arcadion. \n\nJe croyais avoir affaire à un vaisseau pirate et mon seul but a été de protéger la précieuse cargaison que je transportais. \n\n**Tentez votre Chance** pour savoir si l'Arcadien se laissera abusé par votre histoire. Si vous êtes Chanceux, rendez-vous au [[144]]. Sinon, rendez-vous au [[129]].", source_type=<SourceType.PROCESSED: 'processed'>, error=None, timestamp=datetime.datetime(2025, 1, 13, 11, 30, 23, 700216), last_update=datetime.datetime(2025, 1, 13, 11, 30, 23, 700217)) rules=RulesModel(section_number=246, dice_type=<DiceType.CHANCE: 'chance'>, needs_dice=True, needs_user_response=True, next_action=None, conditions=[], choices=[Choice(text='Tentez votre Chance', type=<ChoiceType.DICE: 'dice'>, target_section=None, conditions=[], dice_type=<DiceType.CHANCE: 'chance'>, dice_results={'success': 144, 'failure': 129})], rules_summary='Roll for Chance to determine if the Arcadian believes your story. Success leads to section 144, failure leads to section 129.', error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2025, 1, 13, 11, 30, 23, 469300)) decision=DecisionModel(section_number=246, next_section=None, player_input=None, error=None, awaiting_action=<ActionType.USER_INPUT: 'user_input'>, conditions=[], timestamp=datetime.datetime(2025, 1, 13, 11, 30, 23, 479409), next_action=None) trace=None character=CharacterModel(name='Hero', stats=CharacterStats(endurance=20, chance=20, skill=20), inventory=Inventory(items={}, capacity=10, gold=0)) error=None section_number=246
2025-01-13 11:32:19 | DEBUG    | managers.dependencies:get_agent_manager:81 - Returning existing AgentManager instance
2025-01-13 11:32:19 | DEBUG    | managers.agent_manager:get_state:107 - Fetching current game state
2025-01-13 11:32:19 | DEBUG    | managers.agent_manager:get_state:109 - Current state: session_id='b865d863-053f-4e02-a4d3-90ffcb421a3e' game_id='33f056e4-e680-4f51-ab20-330df3d1ec3b' metadata={'node': 'start'} should_continue=False narrative=NarratorModel(section_number=246, content="# Section 246\n\n— Votre Excellence, bredouillez-vous d'une pauvre voix, je ne pouvais supposer... je veux dire qu'il ne m'est pas venu à l'idée que ce vaisseau pouvait être piloté par l'un des glorieux maîtres du noble Empire arcadien. Mon unique désir est de servir Arcadion. \n\nJe croyais avoir affaire à un vaisseau pirate et mon seul but a été de protéger la précieuse cargaison que je transportais. \n\n**Tentez votre Chance** pour savoir si l'Arcadien se laissera abusé par votre histoire. Si vous êtes Chanceux, rendez-vous au [[144]]. Sinon, rendez-vous au [[129]].", source_type=<SourceType.PROCESSED: 'processed'>, error=None, timestamp=datetime.datetime(2025, 1, 13, 11, 30, 23, 700216), last_update=datetime.datetime(2025, 1, 13, 11, 30, 23, 700217)) rules=RulesModel(section_number=246, dice_type=<DiceType.CHANCE: 'chance'>, needs_dice=True, needs_user_response=True, next_action=None, conditions=[], choices=[Choice(text='Tentez votre Chance', type=<ChoiceType.DICE: 'dice'>, target_section=None, conditions=[], dice_type=<DiceType.CHANCE: 'chance'>, dice_results={'success': 144, 'failure': 129})], rules_summary='Roll for Chance to determine if the Arcadian believes your story. Success leads to section 144, failure leads to section 129.', error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2025, 1, 13, 11, 30, 23, 469300)) decision=DecisionModel(section_number=246, next_section=None, player_input=None, error=None, awaiting_action=<ActionType.USER_INPUT: 'user_input'>, conditions=[], timestamp=datetime.datetime(2025, 1, 13, 11, 30, 23, 479409), next_action=None) trace=None character=CharacterModel(name='Hero', stats=CharacterStats(endurance=20, chance=20, skill=20), inventory=Inventory(items={}, capacity=10, gold=0)) error=None section_number=246
