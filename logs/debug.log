2024-12-30 17:22:59 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:23:01 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-30 17:23:01 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-30 17:23:01 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-30 17:23:01 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-30 17:23:01 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-30 17:23:01 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-30 17:23:01 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-30 17:23:01 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:23:03 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:23:03 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-30 17:23:03 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-30 17:23:03 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-30 17:23:03 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-30 17:23:03 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:23:03 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-30 17:23:03 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-30 17:23:03 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:23:03 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-30 17:23:03 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-30 17:23:03 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-30 17:23:03 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-30 17:23:03 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-30 17:23:03 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-30 17:23:03 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-30 17:23:03 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-30 17:23:04 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-30 17:23:04 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-30 17:23:04 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-30 17:23:04 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-30 17:23:04 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:23:04 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:23:04 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:04 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:04 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:04 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:23:04 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:23:04 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:04 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:23:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:23:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:23:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:23:12 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:23:13 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:13 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:13 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:13 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:13 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:23:13 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:23:14 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:14 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:23:14 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:23:14 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:14 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:23:17 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:17 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-30 17:23:17 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-30 17:23:17 | INFO     | agents.story_graph:_setup_workflow:68 - Setting up LangGraph workflow with parallel processing
2024-12-30 17:23:17 | SUCCESS  | agents.story_graph:_setup_workflow:93 - Workflow setup completed
2024-12-30 17:23:17 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-30 17:23:17 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: 813bcb1d-a134-40a8-a635-21b754ca8c4a
2024-12-30 17:23:17 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: 813bcb1d-a134-40a8-a635-21b754ca8c4a
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\traces
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters
2024-12-30 17:23:17 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: 813bcb1d-a134-40a8-a635-21b754ca8c4a
2024-12-30 17:23:17 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: e0647f4f-faa4-460a-ae09-6cac6f1e1b6c
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:23:17 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': 'e0647f4f-faa4-460a-ae09-6cac6f1e1b6c', 'game_id': '813bcb1d-a134-40a8-a635-21b754ca8c4a', 'last_update': '2024-12-30T17:23:17.621145', 'character_id': 'current'}
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:17 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-30 17:23:17 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-30 17:23:17 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-30 17:23:17 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-30 17:23:17 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 53a2e521-35fc-4660-872b-cdfcf07adaa7
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:23:17 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '53a2e521-35fc-4660-872b-cdfcf07adaa7', 'game_id': '813bcb1d-a134-40a8-a635-21b754ca8c4a', 'last_update': '2024-12-30T17:23:17.651064', 'character_id': 'current'}
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:17 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 53a2e521-35fc-4660-872b-cdfcf07adaa7 and game_id: 813bcb1d-a134-40a8-a635-21b754ca8c4a
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:17 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 53a2e521-35fc-4660-872b-cdfcf07adaa7 and section_number: 1
2024-12-30 17:23:17 | INFO     | agents.story_graph:_process_rules:104 - Processing rules for section 1
2024-12-30 17:23:17 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-30 17:23:17 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-30 17:23:17 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-30 17:23:17 | INFO     | agents.story_graph:_process_narrative:138 - Processing narrative for section 1
2024-12-30 17:23:17 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-30 17:23:17 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-30 17:23:17 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-30 17:23:17 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-30 17:23:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-30 17:23:17 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-30 17:23:17 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-30 17:23:17 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-30 17:23:17 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-30 17:23:17 | DEBUG    | agents.story_graph:_process_rules:120 - Rules processing completed for section 1
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-30 17:23:17 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-30 17:23:17 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-30 17:23:17 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-30 17:23:17 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-30 17:23:17 | DEBUG    | agents.story_graph:_process_narrative:158 - Narrative processing completed for section 1
2024-12-30 17:23:17 | INFO     | agents.story_graph:_process_decision:185 - Waiting for user input in section 1
2024-12-30 17:23:17 | ERROR    | agents.story_graph:_process_decision:222 - Error in decision processing: (Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)
Traceback (most recent call last):

  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=37176, pipe_handle=1144)
                                      â           â <function spawn_main at 0x00000299F88C0860>
                                      â <function spawn_main at 0x00000299F88C0860>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â     â   â 592
               â     â 3
               â <function _main at 0x00000299F88C0900>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           â    â          â 592
           â    â <function BaseProcess._bootstrap at 0x00000299F8806A20>
           â <SpawnProcess name='SpawnProcess-1' parent=37176 started>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\process.py", line 313, in _bootstrap
    self.run()
    â    â <function BaseProcess.run at 0x00000299F8805F80>
    â <SpawnProcess name='SpawnProcess-1' parent=37176 started>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â    â        â    â        â    â {'config': <uvicorn.config.Config object at 0x00000299FDDAF380>, 'target': <bound method Server.run of <uvicorn.server.Server...
    â    â        â    â        â <SpawnProcess name='SpawnProcess-1' parent=37176 started>
    â    â        â    â ()
    â    â        â <SpawnProcess name='SpawnProcess-1' parent=37176 started>
    â    â <function subprocess_started at 0x00000299FE00E700>
    â <SpawnProcess name='SpawnProcess-1' parent=37176 started>
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â              â [<socket.socket fd=720, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    â <bound method Server.run of <uvicorn.server.Server object at 0x00000299FDDAF4D0>>
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           â       â   â    â             â [<socket.socket fd=720, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           â       â   â    â <function Server.serve at 0x00000299FE00D9E0>
           â       â   â <uvicorn.server.Server object at 0x00000299FDDAF4D0>
           â       â <function run at 0x00000299F8E063E0>
           â <module 'asyncio' from 'C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\\L...
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           â      â   â <coroutine object Server.serve at 0x00000299FE002420>
           â      â <function Runner.run at 0x00000299F8E704A0>
           â <asyncio.runners.Runner object at 0x00000299FE038050>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           â    â     â                  â <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\...
           â    â     â <function BaseEventLoop.run_until_complete at 0x00000299F8E69E40>
           â    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
           â <asyncio.runners.Runner object at 0x00000299FE038050>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 707, in run_until_complete
    self.run_forever()
    â    â <function BaseEventLoop.run_forever at 0x00000299F8E69DA0>
    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 678, in run_forever
    self._run_once()
    â    â <function BaseEventLoop._run_once at 0x00000299F8E6BBA0>
    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 2033, in _run_once
    handle._run()
    â      â <function Handle._run at 0x00000299F8DED3A0>
    â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000299FE4A2C80>()>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    â    â            â    â           â    â <member '_args' of 'Handle' objects>
    â    â            â    â           â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000299FE4A2C80>()>
    â    â            â    â <member '_callback' of 'Handle' objects>
    â    â            â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000299FE4A2C80>()>
    â    â <member '_context' of 'Handle' objects>
    â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000299FE4A2C80>()>

> File "C:\Users\erpes\Desktop\casys-rpg\agents\story_graph.py", line 186, in _process_decision
    return interrupt("Waiting for user input")
           â <function interrupt at 0x00000299FDC531A0>

  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\langgraph\types.py", line 485, in interrupt
    raise GraphInterrupt(
          â <class 'langgraph.errors.GraphInterrupt'>

langgraph.errors.GraphInterrupt: (Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)
2024-12-30 17:23:17 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-30 17:23:17 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:17 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:17 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:17 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:17 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-30 17:23:17 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:23:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='e0647f4f-faa4-460a-ae09-6cac6f1e1b6c' game_id='813bcb1d-a134-40a8-a635-21b754ca8c4a' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 23, 17, 695717), last_update=datetime.datetime(2024, 12, 30, 17, 23, 17, 695734)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:23:17 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:17 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='e0647f4f-faa4-460a-ae09-6cac6f1e1b6c' game_id='813bcb1d-a134-40a8-a635-21b754ca8c4a' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 23, 17, 695717), last_update=datetime.datetime(2024, 12, 30, 17, 23, 17, 695734)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:23:21 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:120 - Processing user choice
2024-12-30 17:23:21 | DEBUG    | api.routes.ws.game_route_ws:game_websocket_endpoint:123 - Received choice data: {'type': 'choice', 'choice': {'game_id': '813bcb1d-a134-40a8-a635-21b754ca8c4a', 'choice_id': '48', 'choice_text': "Engager la procÃ©dure d'Ã©vasion", 'metadata': {'type': 'direct', 'target_section': 48, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}}}
2024-12-30 17:23:21 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:136 - Processing choice: game_id='813bcb1d-a134-40a8-a635-21b754ca8c4a' choice_id='48' choice_text="Engager la procÃ©dure d'Ã©vasion" metadata={'type': 'direct', 'target_section': 48, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}
2024-12-30 17:23:21 | INFO     | managers.agent_manager:process_game_state:153 - Starting game state processing
2024-12-30 17:23:21 | DEBUG    | managers.agent_manager:process_game_state:154 - Input state: None, User input: Engager la procÃ©dure d'Ã©vasion
2024-12-30 17:23:21 | DEBUG    | managers.agent_manager:process_game_state:162 - No state provided, getting current state
2024-12-30 17:23:21 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:23:21 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='e0647f4f-faa4-460a-ae09-6cac6f1e1b6c' game_id='813bcb1d-a134-40a8-a635-21b754ca8c4a' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 23, 17, 695717), last_update=datetime.datetime(2024, 12, 30, 17, 23, 17, 695734)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:23:21 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-30 17:23:21 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-30 17:23:21 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 23, 17, 695717), last_update=datetime.datetime(2024, 12, 30, 17, 23, 17, 695734)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)" section_number=1 player_input="Engager la procÃ©dure d'Ã©vasion" content=None
2024-12-30 17:23:21 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-30 17:23:21 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-30 17:23:21 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: f8817732-8e68-4758-ac86-682e34e9a36d
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\characters\current.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:23:21 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': 'f8817732-8e68-4758-ac86-682e34e9a36d', 'game_id': '813bcb1d-a134-40a8-a635-21b754ca8c4a', 'last_update': '2024-12-30T17:23:21.825994', 'character_id': 'current'}
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:21 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: f8817732-8e68-4758-ac86-682e34e9a36d and game_id: 813bcb1d-a134-40a8-a635-21b754ca8c4a
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:21 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: f8817732-8e68-4758-ac86-682e34e9a36d and section_number: 1
2024-12-30 17:23:21 | INFO     | agents.story_graph:_process_rules:104 - Processing rules for section 1
2024-12-30 17:23:21 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-30 17:23:21 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-30 17:23:21 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-30 17:23:21 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-30 17:23:21 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-30 17:23:21 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-30 17:23:21 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-30 17:23:21 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-30 17:23:21 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-30 17:23:21 | DEBUG    | agents.story_graph:_process_rules:120 - Rules processing completed for section 1
2024-12-30 17:23:21 | INFO     | agents.story_graph:_process_narrative:138 - Processing narrative for section 1
2024-12-30 17:23:21 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-30 17:23:21 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-30 17:23:21 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-30 17:23:21 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-30 17:23:21 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-30 17:23:21 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-30 17:23:21 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-30 17:23:21 | DEBUG    | agents.story_graph:_process_narrative:158 - Narrative processing completed for section 1
2024-12-30 17:23:21 | DEBUG    | agents.story_graph:_process_decision:189 - Processing user input: Engager la procÃ©dure d'Ã©vasion
2024-12-30 17:23:21 | DEBUG    | agents.decision_agent:ainvoke:170 - Processing decision for state: session=, section=1
2024-12-30 17:23:21 | DEBUG    | agents.decision_agent:ainvoke:190 - Decision processed successfully
2024-12-30 17:23:21 | ERROR    | agents.story_graph:_process_decision:204 - Decision missing next_section
2024-12-30 17:23:21 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-30 17:23:21 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:23:21 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:23:21 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:23:21 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-30 17:23:21 | ERROR    | managers.agent_manager:process_game_state:182 - No valid result from workflow
2024-12-30 17:23:21 | ERROR    | managers.agent_manager:process_game_state:186 - Error processing game state: No valid result
2024-12-30 17:23:21 | ERROR    | api.routes.ws.game_route_ws:game_websocket_endpoint:150 - Error processing choice: No valid result
2024-12-30 17:24:07 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:24:07 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:24:07 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:24:07 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:24:07 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-30 17:24:07 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:24:07 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-30 17:24:07 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-30 17:24:07 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:24:07 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='' game_id='' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 23, 17, 695717), last_update=datetime.datetime(2024, 12, 30, 17, 23, 17, 695734)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:bb505274-5a6f-3336-a98b-d1cf02eefb35'], when='during'),)" section_number=1 player_input="Engager la procÃ©dure d'Ã©vasion" content=None
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current in namespace state
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:24:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:24:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current.json
2024-12-30 17:24:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_current
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1 in namespace state
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:24:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:24:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:24:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\813bcb1d-a134-40a8-a635-21b754ca8c4a\states\game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1.json
2024-12-30 17:24:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_813bcb1d-a134-40a8-a635-21b754ca8c4a_section_1
2024-12-30 17:24:07 | INFO     | managers.agent_manager:stop_game:335 - Final game state saved successfully
2024-12-30 17:24:07 | INFO     | managers.agent_manager:stop_game:337 - Game stopped successfully
2024-12-30 17:24:07 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-30 17:24:09 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:24:15 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:24:15 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-30 17:24:15 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-30 17:24:15 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-30 17:24:15 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-30 17:24:15 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:24:15 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-30 17:24:15 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-30 17:24:15 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:24:15 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-30 17:24:15 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-30 17:24:15 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-30 17:24:15 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-30 17:24:15 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-30 17:24:15 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-30 17:24:15 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-30 17:24:15 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-30 17:24:17 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-30 17:24:17 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-30 17:24:17 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-30 17:24:17 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-30 17:24:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:24:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:24:17 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:24:17 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:24:17 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:24:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:24:17 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:24:17 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:24:17 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:24:42 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:24:42 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:24:42 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:25:20 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:25:20 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:25:20 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:25:30 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:25:30 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:25:30 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:25:30 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:25:47 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:25:49 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-30 17:25:49 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-30 17:25:49 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-30 17:25:49 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-30 17:25:49 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-30 17:25:49 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-30 17:25:49 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-30 17:25:50 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:25:51 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:25:51 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-30 17:25:52 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-30 17:25:52 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-30 17:25:52 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-30 17:25:52 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:25:52 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-30 17:25:52 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-30 17:25:52 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:25:52 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-30 17:25:52 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-30 17:25:52 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-30 17:25:52 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-30 17:25:52 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-30 17:25:52 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-30 17:25:52 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-30 17:25:52 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-30 17:25:52 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-30 17:25:52 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-30 17:25:52 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-30 17:25:52 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-30 17:25:52 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:25:52 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:25:52 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:25:52 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-30 17:25:57 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:25:57 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-30 17:25:57 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-30 17:25:57 | INFO     | agents.story_graph:_setup_workflow:68 - Setting up LangGraph workflow with parallel processing
2024-12-30 17:25:57 | SUCCESS  | agents.story_graph:_setup_workflow:93 - Workflow setup completed
2024-12-30 17:25:57 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-30 17:25:57 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: 47a3be78-2578-4904-bee6-d9cc524e2a28
2024-12-30 17:25:57 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: 47a3be78-2578-4904-bee6-d9cc524e2a28
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\traces
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters
2024-12-30 17:25:57 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: 47a3be78-2578-4904-bee6-d9cc524e2a28
2024-12-30 17:25:57 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 104f6641-f028-46af-8958-ff331871d090
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:25:57 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '104f6641-f028-46af-8958-ff331871d090', 'game_id': '47a3be78-2578-4904-bee6-d9cc524e2a28', 'last_update': '2024-12-30T17:25:57.113508', 'character_id': 'current'}
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:25:57 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-30 17:25:57 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-30 17:25:57 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-30 17:25:57 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-30 17:25:57 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: ac451b39-ed3b-438a-8072-6ca73502d642
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:25:57 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': 'ac451b39-ed3b-438a-8072-6ca73502d642', 'game_id': '47a3be78-2578-4904-bee6-d9cc524e2a28', 'last_update': '2024-12-30T17:25:57.132901', 'character_id': 'current'}
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:25:57 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: ac451b39-ed3b-438a-8072-6ca73502d642 and game_id: 47a3be78-2578-4904-bee6-d9cc524e2a28
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:25:57 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: ac451b39-ed3b-438a-8072-6ca73502d642 and section_number: 1
2024-12-30 17:25:57 | INFO     | agents.story_graph:_process_rules:104 - Processing rules for section 1
2024-12-30 17:25:57 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-30 17:25:57 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-30 17:25:57 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-30 17:25:57 | INFO     | agents.story_graph:_process_narrative:138 - Processing narrative for section 1
2024-12-30 17:25:57 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-30 17:25:57 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-30 17:25:57 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-30 17:25:57 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-30 17:25:57 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-30 17:25:57 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-30 17:25:57 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-30 17:25:57 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-30 17:25:57 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-30 17:25:57 | DEBUG    | agents.story_graph:_process_rules:120 - Rules processing completed for section 1
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-30 17:25:57 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-30 17:25:57 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-30 17:25:57 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-30 17:25:57 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-30 17:25:57 | DEBUG    | agents.story_graph:_process_narrative:158 - Narrative processing completed for section 1
2024-12-30 17:25:57 | INFO     | agents.story_graph:_process_decision:185 - Waiting for user input in section 1
2024-12-30 17:25:57 | ERROR    | agents.story_graph:_process_decision:222 - Error in decision processing: (Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)
Traceback (most recent call last):

  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=48440, pipe_handle=1240)
                                      â           â <function spawn_main at 0x00000284B68C0860>
                                      â <function spawn_main at 0x00000284B68C0860>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               â     â   â 604
               â     â 3
               â <function _main at 0x00000284B68C0900>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           â    â          â 604
           â    â <function BaseProcess._bootstrap at 0x00000284B6806A20>
           â <SpawnProcess name='SpawnProcess-1' parent=48440 started>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\process.py", line 313, in _bootstrap
    self.run()
    â    â <function BaseProcess.run at 0x00000284B6805F80>
    â <SpawnProcess name='SpawnProcess-1' parent=48440 started>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    â    â        â    â        â    â {'config': <uvicorn.config.Config object at 0x00000284BBCAF380>, 'target': <bound method Server.run of <uvicorn.server.Server...
    â    â        â    â        â <SpawnProcess name='SpawnProcess-1' parent=48440 started>
    â    â        â    â ()
    â    â        â <SpawnProcess name='SpawnProcess-1' parent=48440 started>
    â    â <function subprocess_started at 0x00000284BBD0E700>
    â <SpawnProcess name='SpawnProcess-1' parent=48440 started>
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    â              â [<socket.socket fd=752, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
    â <bound method Server.run of <uvicorn.server.Server object at 0x00000284BBCAF4D0>>
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           â       â   â    â             â [<socket.socket fd=752, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]
           â       â   â    â <function Server.serve at 0x00000284BBD0D9E0>
           â       â   â <uvicorn.server.Server object at 0x00000284BBCAF4D0>
           â       â <function run at 0x00000284B6D063E0>
           â <module 'asyncio' from 'C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\\L...
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           â      â   â <coroutine object Server.serve at 0x00000284BBD06420>
           â      â <function Runner.run at 0x00000284B6D704A0>
           â <asyncio.runners.Runner object at 0x00000284BBD38050>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           â    â     â                  â <Task pending name='Task-1' coro=<Server.serve() running at C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\...
           â    â     â <function BaseEventLoop.run_until_complete at 0x00000284B6D69E40>
           â    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
           â <asyncio.runners.Runner object at 0x00000284BBD38050>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 707, in run_until_complete
    self.run_forever()
    â    â <function BaseEventLoop.run_forever at 0x00000284B6D69DA0>
    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 678, in run_forever
    self._run_once()
    â    â <function BaseEventLoop._run_once at 0x00000284B6D6BBA0>
    â <_WindowsSelectorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 2033, in _run_once
    handle._run()
    â      â <function Handle._run at 0x00000284B6CED3A0>
    â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000284BC1056C0>()>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    â    â            â    â           â    â <member '_args' of 'Handle' objects>
    â    â            â    â           â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000284BC1056C0>()>
    â    â            â    â <member '_callback' of 'Handle' objects>
    â    â            â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000284BC1056C0>()>
    â    â <member '_context' of 'Handle' objects>
    â <Handle <_asyncio.TaskStepMethWrapper object at 0x00000284BC1056C0>()>

> File "C:\Users\erpes\Desktop\casys-rpg\agents\story_graph.py", line 186, in _process_decision
    return interrupt("Waiting for user input")
           â <function interrupt at 0x00000284BB9671A0>

  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\langgraph\types.py", line 485, in interrupt
    raise GraphInterrupt(
          â <class 'langgraph.errors.GraphInterrupt'>

langgraph.errors.GraphInterrupt: (Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)
2024-12-30 17:25:57 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-30 17:25:57 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:25:57 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:25:57 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:25:57 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:25:57 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-30 17:25:57 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:25:57 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:70 - New WebSocket connection attempt
2024-12-30 17:25:57 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:78 - WebSocket connection established
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='104f6641-f028-46af-8958-ff331871d090' game_id='47a3be78-2578-4904-bee6-d9cc524e2a28' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:25:57 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:25:57 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='104f6641-f028-46af-8958-ff331871d090' game_id='47a3be78-2578-4904-bee6-d9cc524e2a28' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:26:06 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:26:06 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:26:06 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='104f6641-f028-46af-8958-ff331871d090' game_id='47a3be78-2578-4904-bee6-d9cc524e2a28' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:26:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:120 - Processing user choice
2024-12-30 17:26:12 | DEBUG    | api.routes.ws.game_route_ws:game_websocket_endpoint:123 - Received choice data: {'type': 'choice', 'choice': {'game_id': '47a3be78-2578-4904-bee6-d9cc524e2a28', 'choice_id': '48', 'choice_text': "Engager la procÃ©dure d'Ã©vasion", 'metadata': {'type': 'direct', 'target_section': 48, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}}}
2024-12-30 17:26:12 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:136 - Processing choice: game_id='47a3be78-2578-4904-bee6-d9cc524e2a28' choice_id='48' choice_text="Engager la procÃ©dure d'Ã©vasion" metadata={'type': 'direct', 'target_section': 48, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}
2024-12-30 17:26:12 | INFO     | managers.agent_manager:process_game_state:153 - Starting game state processing
2024-12-30 17:26:12 | DEBUG    | managers.agent_manager:process_game_state:154 - Input state: None, User input: Engager la procÃ©dure d'Ã©vasion
2024-12-30 17:26:12 | DEBUG    | managers.agent_manager:process_game_state:162 - No state provided, getting current state
2024-12-30 17:26:12 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:26:12 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='104f6641-f028-46af-8958-ff331871d090' game_id='47a3be78-2578-4904-bee6-d9cc524e2a28' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input=None content=None
2024-12-30 17:26:12 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-30 17:26:12 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-30 17:26:12 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input="Engager la procÃ©dure d'Ã©vasion" content=None
2024-12-30 17:26:12 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-30 17:26:12 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-30 17:26:12 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 3c3b6705-0ff4-4366-b561-337622cac39e
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\characters\current.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-30 17:26:12 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '3c3b6705-0ff4-4366-b561-337622cac39e', 'game_id': '47a3be78-2578-4904-bee6-d9cc524e2a28', 'last_update': '2024-12-30T17:26:12.200388', 'character_id': 'current'}
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:26:12 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 3c3b6705-0ff4-4366-b561-337622cac39e and game_id: 47a3be78-2578-4904-bee6-d9cc524e2a28
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:26:12 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 3c3b6705-0ff4-4366-b561-337622cac39e and section_number: 1
2024-12-30 17:26:12 | INFO     | agents.story_graph:_process_rules:104 - Processing rules for section 1
2024-12-30 17:26:12 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-30 17:26:12 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-30 17:26:12 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-30 17:26:12 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-30 17:26:12 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-30 17:26:12 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-30 17:26:12 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-30 17:26:12 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-30 17:26:12 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-30 17:26:12 | DEBUG    | agents.story_graph:_process_rules:120 - Rules processing completed for section 1
2024-12-30 17:26:12 | INFO     | agents.story_graph:_process_narrative:138 - Processing narrative for section 1
2024-12-30 17:26:12 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-30 17:26:12 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-30 17:26:12 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-30 17:26:12 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-30 17:26:12 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-30 17:26:12 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-30 17:26:12 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-30 17:26:12 | DEBUG    | agents.story_graph:_process_narrative:158 - Narrative processing completed for section 1
2024-12-30 17:26:12 | DEBUG    | agents.story_graph:_process_decision:189 - Processing user input: Engager la procÃ©dure d'Ã©vasion
2024-12-30 17:26:12 | DEBUG    | agents.decision_agent:ainvoke:170 - Processing decision for state: session=, section=1
2024-12-30 17:26:12 | DEBUG    | agents.decision_agent:ainvoke:190 - Decision processed successfully
2024-12-30 17:26:12 | ERROR    | agents.story_graph:_process_decision:204 - Decision missing next_section
2024-12-30 17:26:12 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-30 17:26:12 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:26:12 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:26:12 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:26:12 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-30 17:26:12 | ERROR    | managers.agent_manager:process_game_state:182 - No valid result from workflow
2024-12-30 17:26:12 | ERROR    | managers.agent_manager:process_game_state:186 - Error processing game state: No valid result
2024-12-30 17:26:12 | ERROR    | api.routes.ws.game_route_ws:game_websocket_endpoint:150 - Error processing choice: No valid result
2024-12-30 17:31:09 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:31:09 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:31:09 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:158 - WebSocket disconnected
2024-12-30 17:31:09 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:172 - WebSocket connection closed
2024-12-30 17:31:09 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-30 17:31:09 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-30 17:31:09 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-30 17:31:09 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-30 17:31:09 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-30 17:31:09 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='' game_id='' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 30, 17, 25, 57, 169811), last_update=datetime.datetime(2024, 12, 30, 17, 25, 57, 169822)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error="(Interrupt(value='Waiting for user input', resumable=True, ns=['node_decision:845a91ac-1cf3-aeaa-a410-c57d1088a985'], when='during'),)" section_number=1 player_input="Engager la procÃ©dure d'Ã©vasion" content=None
2024-12-30 17:31:09 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_current in namespace state
2024-12-30 17:31:09 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:31:09 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:31:09 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:31:09 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:31:10 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_current.json
2024-12-30 17:31:10 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_current
2024-12-30 17:31:10 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1 in namespace state
2024-12-30 17:31:10 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-30 17:31:10 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-30 17:31:10 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:31:10 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:31:10 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\47a3be78-2578-4904-bee6-d9cc524e2a28\states\game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1.json
2024-12-30 17:31:10 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_47a3be78-2578-4904-bee6-d9cc524e2a28_section_1
2024-12-30 17:31:10 | INFO     | managers.agent_manager:stop_game:335 - Final game state saved successfully
2024-12-30 17:31:10 | INFO     | managers.agent_manager:stop_game:337 - Game stopped successfully
2024-12-30 17:31:10 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-30 17:31:13 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:31:20 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-30 17:31:20 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-30 17:31:20 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-30 17:31:20 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-30 17:31:20 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-30 17:31:20 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:31:20 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-30 17:31:20 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-30 17:31:20 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-30 17:31:20 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-30 17:31:20 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-30 17:31:20 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-30 17:31:20 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-30 17:31:20 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-30 17:31:20 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-30 17:31:20 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-30 17:31:20 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
