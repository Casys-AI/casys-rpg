2024-12-29 16:51:22 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:25 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 16:51:25 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 16:51:25 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 16:51:25 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:27 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 16:51:27 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 16:52:05 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 16:52:05 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 16:52:05 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 16:52:05 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 16:52:05 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 16:52:05 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 16:52:05 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 16:52:05 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 16:52:05 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 16:52:05 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 16:52:05 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 16:52:05 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 16:52:05 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 16:52:05 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 16:52:07 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 16:52:07 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 16:52:07 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 16:52:07 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 16:52:07 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 16:52:07 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 16:52:07 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-29 16:52:07 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-29 16:52:07 | INFO     | agents.story_graph:_setup_workflow:67 - Setting up LangGraph workflow with parallel processing
2024-12-29 16:52:07 | SUCCESS  | agents.story_graph:_setup_workflow:92 - Workflow setup completed
2024-12-29 16:52:07 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\traces
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters
2024-12-29 16:52:07 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | INFO     | managers.state_manager:create_initial_state:346 - Creating initial state with session_id: 84fbc3f7-f1f7-4935-8c10-4d390315dd1d
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:create_initial_state:373 - Parameters for initial GameState: {'section_number': 1, 'session_id': '84fbc3f7-f1f7-4935-8c10-4d390315dd1d', 'game_id': '6ad21134-3127-484c-afb4-2c94a160218e', 'last_update': '2024-12-29T16:52:07.161048', 'character_id': 'current'}
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 16:52:07 | INFO     | managers.state_manager:create_initial_state:346 - Creating initial state with session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\characters\current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 16:52:07 | DEBUG    | managers.state_manager:create_initial_state:373 - Parameters for initial GameState: {'section_number': 1, 'session_id': '59e368ae-91fd-4a93-b99b-f426e23fd83f', 'game_id': '6ad21134-3127-484c-afb4-2c94a160218e', 'last_update': '2024-12-29T16:52:07.210195', 'character_id': 'current'}
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f and game_id: 6ad21134-3127-484c-afb4-2c94a160218e
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 59e368ae-91fd-4a93-b99b-f426e23fd83f and section_number: 1
2024-12-29 16:52:07 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 16:52:07 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 16:52:07 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 16:52:07 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 16:52:07 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 16:52:07 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 16:52:07 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 16:52:07 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 16:52:07 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 16:52:07 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-29 16:52:07 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 16:52:07 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 16:52:07 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 16:52:07 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 16:52:07 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 16:52:07 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 16:52:07 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 16:52:07 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 16:52:07 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 17:00:58 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 17:00:58 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 17:00:58 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 17:00:58 | INFO     | managers.agent_manager:stop_game:382 - Stopping game...
2024-12-29 17:00:58 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 17:00:58 | DEBUG    | managers.state_manager:get_current_state:267 - Getting current state
2024-12-29 17:00:58 | DEBUG    | managers.state_manager:get_current_state:271 - Returning current state from memory
2024-12-29 17:00:58 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='84fbc3f7-f1f7-4935-8c10-4d390315dd1d' game_id='6ad21134-3127-484c-afb4-2c94a160218e' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 29, 16, 52, 7, 355898), last_update=datetime.datetime(2024, 12, 29, 16, 52, 7, 355954)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_current in namespace state
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 17:00:58 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 17:00:58 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_current.json
2024-12-29 17:00:58 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_current
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_6ad21134-3127-484c-afb4-2c94a160218e_section_1 in namespace state
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 17:00:58 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 17:00:58 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 17:00:58 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\6ad21134-3127-484c-afb4-2c94a160218e\states\game_6ad21134-3127-484c-afb4-2c94a160218e_section_1.json
2024-12-29 17:00:58 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_6ad21134-3127-484c-afb4-2c94a160218e_section_1
2024-12-29 17:00:58 | INFO     | managers.agent_manager:stop_game:394 - Final game state saved successfully
2024-12-29 17:00:58 | INFO     | managers.agent_manager:stop_game:396 - Game stopped successfully
2024-12-29 17:00:58 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 17:01:10 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:01:12 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 17:01:12 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 17:01:12 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 17:01:12 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 17:01:12 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 17:01:12 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 17:01:12 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 17:01:12 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:01:14 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:01:14 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 17:46:19 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 17:46:19 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 17:46:19 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 17:46:19 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 17:46:19 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:46:19 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 17:46:19 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 17:46:19 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:46:19 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 17:46:19 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 17:46:19 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 17:46:19 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 17:46:19 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 17:46:19 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 17:46:19 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 17:46:19 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 17:46:20 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 17:46:20 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 17:46:20 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 17:46:20 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 17:46:20 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 17:46:20 | INFO     | managers.agent_manager:stop_game:382 - Stopping game...
2024-12-29 17:46:20 | DEBUG    | managers.agent_manager:stop_game:387 - No game ID set, nothing to save
2024-12-29 17:46:20 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 17:46:21 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:50:51 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:58:54 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:59:14 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:59:18 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:59:18 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 17:59:27 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 17:59:27 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 17:59:27 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 17:59:27 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 17:59:27 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:59:27 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 17:59:27 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 17:59:27 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 17:59:27 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 17:59:27 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 17:59:27 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 17:59:27 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 17:59:27 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 17:59:27 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 17:59:27 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 17:59:27 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 17:59:27 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 17:59:27 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 17:59:27 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 17:59:27 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 17:59:27 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 17:59:27 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 17:59:27 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 17:59:27 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 17:59:28 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:59:31 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 17:59:31 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:01:02 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:01:02 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:01:02 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:01:02 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:01:02 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:02 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:01:02 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:01:02 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:02 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:01:02 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:01:02 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:01:02 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:01:02 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:01:02 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:01:02 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:01:02 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:01:04 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:01:04 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:01:04 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:01:04 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:01:04 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:01:04 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:01:04 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:01:04 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:01:06 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:01:12 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:01:12 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:01:30 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:01:30 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:01:30 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:01:30 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:01:30 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:30 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:01:30 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:01:30 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:01:30 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:01:30 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:01:30 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:01:30 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:01:30 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:01:30 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:01:30 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:01:30 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:01:32 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:01:32 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:01:32 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:01:32 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:01:32 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:01:32 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:01:32 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:01:32 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:01:41 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:01:43 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 18:01:43 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 18:01:43 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 18:01:43 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 18:01:43 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 18:01:43 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 18:01:43 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 18:01:44 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:01:45 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:01:45 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:04:06 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:04:06 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:04:06 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:04:06 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:04:06 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:06 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:04:06 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:04:06 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:06 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:04:06 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:04:06 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:04:06 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:04:06 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:04:06 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:04:06 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:04:06 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:04:07 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:04:07 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:04:07 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:04:07 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:04:07 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:04:07 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:04:07 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:04:07 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:04:09 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:04:13 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:04:13 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:04:19 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:04:19 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:04:19 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:04:19 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:04:19 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:19 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:04:19 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:04:19 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:04:19 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:04:19 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:04:19 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:04:19 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:04:19 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:04:19 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:04:19 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:04:19 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:04:20 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:04:20 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:04:20 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:04:20 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:04:20 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:04:20 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:04:20 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:04:20 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:04:20 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:04:24 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:04:24 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:06:44 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:06:44 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:06:44 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:06:44 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:06:44 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:44 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:06:44 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:06:44 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:44 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:06:44 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:06:44 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:06:44 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:06:44 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:06:44 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:06:44 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:06:44 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:06:45 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:06:45 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:06:45 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:06:45 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:06:45 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:06:45 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:06:45 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:06:45 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:06:47 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:06:51 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:06:51 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:06:59 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:06:59 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:06:59 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:06:59 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:06:59 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:59 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:06:59 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:06:59 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:06:59 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:06:59 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:06:59 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:06:59 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:06:59 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:06:59 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:06:59 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:06:59 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:07:00 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:07:00 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:07:00 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:07:00 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:07:00 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:07:00 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:07:00 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:07:00 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:07:03 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:07:05 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 18:07:05 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 18:07:05 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 18:07:05 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 18:07:05 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 18:07:05 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 18:07:05 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 18:07:05 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:07:07 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:07:07 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:08:02 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 18:08:02 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:08:02 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:08:02 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:08:02 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:02 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:08:02 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:08:02 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:02 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:08:02 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:08:02 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:08:02 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:08:02 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:08:02 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:08:02 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:08:02 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:08:03 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:08:03 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:08:03 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:08:03 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:08:03 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 18:08:03 | INFO     | managers.agent_manager:stop_game:328 - Stopping game...
2024-12-29 18:08:03 | DEBUG    | managers.agent_manager:stop_game:333 - No game ID set, nothing to save
2024-12-29 18:08:03 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 18:08:05 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:08:09 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 18:08:09 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 18:08:15 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 18:08:15 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 18:08:15 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 18:08:15 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:15 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 18:08:15 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 18:08:15 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 18:08:15 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 18:08:15 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 18:08:15 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 18:08:15 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 18:08:15 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 18:08:15 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 18:08:15 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 18:08:15 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 18:08:16 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 18:08:16 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 18:08:16 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 18:08:16 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 18:08:16 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 18:08:16 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 18:08:16 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 18:08:16 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 18:08:46 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:108 - Processing user choice
2024-12-29 18:08:46 | DEBUG    | api.routes.ws.game_route_ws:game_websocket_endpoint:111 - Received choice data: {'type': 'choice', 'choice': "Engager la procÃ©dure d'Ã©vasion"}
2024-12-29 18:08:46 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:116 - Processing choice: Engager la procÃ©dure d'Ã©vasion
2024-12-29 18:08:46 | INFO     | managers.agent_manager:process_game_state:153 - Starting game state processing
2024-12-29 18:08:46 | DEBUG    | managers.agent_manager:process_game_state:154 - Input state: None, User input: Engager la procÃ©dure d'Ã©vasion
2024-12-29 18:08:46 | ERROR    | managers.agent_manager:process_game_state:157 - Story graph not initialized
2024-12-29 18:08:46 | ERROR    | managers.agent_manager:process_game_state:186 - Error processing game state: Story graph not initialized
2024-12-29 18:08:46 | ERROR    | api.routes.ws.game_route_ws:game_websocket_endpoint:130 - Error processing choice: Story graph not initialized
2024-12-29 18:08:59 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:138 - WebSocket disconnected
2024-12-29 18:08:59 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:152 - WebSocket connection closed
2024-12-29 18:09:00 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 18:09:00 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 18:09:00 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 18:09:00 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 18:09:00 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 21:08:35 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 21:08:38 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 21:08:38 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 21:08:38 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 21:08:38 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 21:08:38 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 21:08:38 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 21:08:38 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 21:08:38 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 21:08:40 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 21:08:40 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 21:08:57 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 21:08:57 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 21:08:57 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 21:08:57 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 21:08:57 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:08:57 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 21:08:57 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 21:08:57 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:08:57 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 21:08:57 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 21:08:57 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 21:08:57 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 21:08:57 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 21:08:57 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 21:08:57 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 21:08:57 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 21:08:58 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 21:08:58 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 21:08:58 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 21:08:58 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 21:08:58 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 21:08:58 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-29 21:08:58 | DEBUG    | managers.agent_manager:stop_game:328 - No game ID set, nothing to save
2024-12-29 21:08:58 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 21:08:59 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 21:09:03 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 21:09:03 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 21:09:31 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 21:09:31 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 21:09:31 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 21:09:31 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:09:31 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 21:09:31 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 21:09:31 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 21:09:31 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 21:09:31 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 21:09:31 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 21:09:31 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 21:09:31 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 21:09:31 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 21:09:31 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 21:09:31 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 21:09:32 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 21:09:32 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 21:09:32 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 21:09:32 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 21:09:32 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 21:09:32 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 21:09:32 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 21:09:32 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 21:09:57 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:138 - WebSocket disconnected
2024-12-29 21:09:57 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:152 - WebSocket connection closed
2024-12-29 21:09:59 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 21:09:59 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 21:09:59 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 21:09:59 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 21:09:59 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 21:10:00 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:138 - WebSocket disconnected
2024-12-29 21:10:00 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:152 - WebSocket connection closed
2024-12-29 21:10:01 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 21:10:01 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 21:10:01 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 21:10:01 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 21:10:01 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 21:10:18 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:138 - WebSocket disconnected
2024-12-29 21:10:18 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:152 - WebSocket connection closed
2024-12-29 21:10:19 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 21:10:19 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:63 - New WebSocket connection attempt
2024-12-29 21:10:19 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:66 - WebSocket connection established
2024-12-29 21:10:19 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 21:10:19 | DEBUG    | managers.agent_manager:get_state:194 - Current state: None
2024-12-29 21:10:31 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:138 - WebSocket disconnected
2024-12-29 21:10:31 | INFO     | api.routes.ws.game_route_ws:game_websocket_endpoint:152 - WebSocket connection closed
2024-12-29 22:12:57 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:12:59 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 22:12:59 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 22:12:59 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 22:12:59 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 22:12:59 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 22:12:59 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 22:12:59 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 22:12:59 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:13:01 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:13:01 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 22:15:22 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 22:15:22 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 22:15:22 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 22:15:22 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 22:15:22 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:15:22 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 22:15:22 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 22:15:22 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:15:22 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 22:15:22 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 22:15:22 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 22:15:22 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 22:15:22 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 22:15:22 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 22:15:22 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 22:15:22 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 22:15:24 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 22:15:24 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 22:15:24 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 22:15:24 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 22:15:24 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 22:15:24 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-29 22:15:24 | DEBUG    | managers.agent_manager:stop_game:328 - No game ID set, nothing to save
2024-12-29 22:15:24 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 22:15:25 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:15:29 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:15:29 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 22:18:48 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 22:18:48 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 22:18:48 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 22:18:48 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:18:48 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 22:18:48 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 22:18:48 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:18:48 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 22:18:48 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 22:18:48 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 22:18:48 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 22:18:48 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 22:18:48 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 22:18:48 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 22:18:48 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 22:18:48 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 22:18:48 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 22:18:48 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 22:18:48 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 22:18:48 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 22:18:48 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 22:18:48 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-29 22:18:48 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-29 22:18:48 | INFO     | agents.story_graph:_setup_workflow:67 - Setting up LangGraph workflow with parallel processing
2024-12-29 22:18:48 | SUCCESS  | agents.story_graph:_setup_workflow:92 - Workflow setup completed
2024-12-29 22:18:48 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-29 22:18:48 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: bd6b5160-eaef-4c78-a020-41a8c80d2a24
2024-12-29 22:18:48 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: bd6b5160-eaef-4c78-a020-41a8c80d2a24
2024-12-29 22:18:48 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states
2024-12-29 22:18:48 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\traces
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters
2024-12-29 22:18:49 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: bd6b5160-eaef-4c78-a020-41a8c80d2a24
2024-12-29 22:18:49 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 75f78a43-d045-4cb8-b02e-e0ec3a851e42
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:18:49 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '75f78a43-d045-4cb8-b02e-e0ec3a851e42', 'game_id': 'bd6b5160-eaef-4c78-a020-41a8c80d2a24', 'last_update': '2024-12-29T22:18:49.025287', 'character_id': 'current'}
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:18:49 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 22:18:49 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:18:49 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 22:18:49 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 22:18:49 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 2ec51645-29de-460f-b8d7-589ebd7982d4
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\characters\current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:18:49 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '2ec51645-29de-460f-b8d7-589ebd7982d4', 'game_id': 'bd6b5160-eaef-4c78-a020-41a8c80d2a24', 'last_update': '2024-12-29T22:18:49.083690', 'character_id': 'current'}
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:18:49 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 2ec51645-29de-460f-b8d7-589ebd7982d4 and game_id: bd6b5160-eaef-4c78-a020-41a8c80d2a24
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:18:49 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 2ec51645-29de-460f-b8d7-589ebd7982d4 and section_number: 1
2024-12-29 22:18:49 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 22:18:49 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 22:18:49 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 22:18:49 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 22:18:49 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 22:18:49 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 22:18:49 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 22:18:49 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 22:18:49 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 22:18:49 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 22:18:49 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 22:18:49 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 22:18:49 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 22:18:49 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 22:18:49 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-29 22:18:49 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 22:18:49 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 22:18:49 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 22:18:49 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 22:18:49 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 22:18:49 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 22:18:49 | INFO     | agents.story_graph:_process_decision:215 -  En attente d'une rÃ©ponse utilisateur pour la section 1
2024-12-29 22:18:49 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 22:18:49 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:18:49 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:18:49 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:18:49 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:18:49 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 22:20:06 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 22:20:06 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:20:06 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 22:20:06 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-29 22:20:06 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 22:20:06 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='75f78a43-d045-4cb8-b02e-e0ec3a851e42' game_id='bd6b5160-eaef-4c78-a020-41a8c80d2a24' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 29, 22, 18, 49, 143755), last_update=datetime.datetime(2024, 12, 29, 22, 18, 49, 143771)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current in namespace state
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:20:06 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:20:06 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current.json
2024-12-29 22:20:06 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_current
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1 in namespace state
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:06 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:20:06 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:20:06 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\bd6b5160-eaef-4c78-a020-41a8c80d2a24\states\game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1.json
2024-12-29 22:20:06 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_bd6b5160-eaef-4c78-a020-41a8c80d2a24_section_1
2024-12-29 22:20:06 | INFO     | managers.agent_manager:stop_game:335 - Final game state saved successfully
2024-12-29 22:20:06 | INFO     | managers.agent_manager:stop_game:337 - Game stopped successfully
2024-12-29 22:20:06 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 22:20:09 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:20:12 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:20:16 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:20:16 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 22:20:28 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 22:20:28 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 22:20:28 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 22:20:28 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:20:28 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 22:20:28 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 22:20:28 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:20:28 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 22:20:28 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 22:20:28 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 22:20:28 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 22:20:28 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 22:20:28 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 22:20:28 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 22:20:28 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 22:20:29 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 22:20:29 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 22:20:29 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 22:20:29 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 22:20:29 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 22:20:29 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 22:20:29 | DEBUG    | managers.agent_manager:get_story_workflow:265 - Story graph not configured, configuring now
2024-12-29 22:20:29 | DEBUG    | managers.agent_manager:get_story_workflow:274 - Compiling workflow
2024-12-29 22:20:29 | INFO     | agents.story_graph:_setup_workflow:67 - Setting up LangGraph workflow with parallel processing
2024-12-29 22:20:29 | SUCCESS  | agents.story_graph:_setup_workflow:92 - Workflow setup completed
2024-12-29 22:20:29 | INFO     | managers.state_manager:initialize:51 - Initializing StateManager
2024-12-29 22:20:29 | DEBUG    | managers.state_manager:initialize:53 - Generated game ID: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:20:29 | INFO     | managers.cache_manager:update_game_id:356 - Updating game ID to: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for state: data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for trace: data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\traces
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:update_game_id:366 - Creating per-game directory for characters: data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters
2024-12-29 22:20:29 | INFO     | managers.state_manager:initialize:56 - Initialized state manager with game ID: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:20:29 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 132f19ea-c94c-4982-af29-0c79fc309e3f
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:20:29 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '132f19ea-c94c-4982-af29-0c79fc309e3f', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:20:29.033880', 'character_id': 'current'}
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 22:20:29 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 7e5aaec0-a716-4833-aa15-bb3edd09884b
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:20:29 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '7e5aaec0-a716-4833-aa15-bb3edd09884b', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:20:29.066288', 'character_id': 'current'}
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 7e5aaec0-a716-4833-aa15-bb3edd09884b and game_id: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 7e5aaec0-a716-4833-aa15-bb3edd09884b and section_number: 1
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 22:20:29 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 22:20:29 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:205 - Looking for file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:read_file_async:100 - Reading from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules\section_1_rules.md (590 characters)
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace rules with format StorageFormat.MARKDOWN
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 22:20:29 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 22:20:29 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 22:20:29 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 22:20:29 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:read_file_async:117 - Successfully read from file: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections\section_1.md (2538 characters)
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:210 - Found in persistent storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_deserialize_data:104 - Deserializing data for namespace sections with format StorageFormat.MARKDOWN
2024-12-29 22:20:29 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 22:20:29 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 22:20:29 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_decision:215 -  En attente d'une rÃ©ponse utilisateur pour la section 1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 22:20:29 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:20:29 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 22:20:29 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 22:20:29 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 2055e3a8-3936-47c3-9802-5115ae970217
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:20:29 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '2055e3a8-3936-47c3-9802-5115ae970217', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:20:29.335917', 'character_id': 'current'}
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 22:20:29 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 9c006ff9-bf34-4522-b107-03a6e337db68
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:20:29 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '9c006ff9-bf34-4522-b107-03a6e337db68', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:20:29.361308', 'character_id': 'current'}
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 9c006ff9-bf34-4522-b107-03a6e337db68 and game_id: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 9c006ff9-bf34-4522-b107-03a6e337db68 and section_number: 1
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 22:20:29 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 22:20:29 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 22:20:29 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 22:20:29 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 22:20:29 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 22:20:29 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 22:20:29 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 22:20:29 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:20:29 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 22:20:29 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 22:20:29 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 22:20:29 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 22:20:29 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 22:20:29 | INFO     | agents.story_graph:_process_decision:215 -  En attente d'une rÃ©ponse utilisateur pour la section 1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 22:20:29 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:20:29 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:20:29 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:20:29 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 22:21:38 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:21:38 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 22:21:38 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 22:21:38 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 0cb367b8-ed06-4c59-9642-5ae5bf3ef5f4
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:21:38 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '0cb367b8-ed06-4c59-9642-5ae5bf3ef5f4', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:21:38.203952', 'character_id': 'current'}
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:21:38 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 22:21:38 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:21:38 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 22:21:38 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 22:21:38 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: d012ade0-e69c-4cce-afbb-ce5282bdc878
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:21:38 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': 'd012ade0-e69c-4cce-afbb-ce5282bdc878', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:21:38.274405', 'character_id': 'current'}
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:21:38 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: d012ade0-e69c-4cce-afbb-ce5282bdc878 and game_id: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:21:38 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: d012ade0-e69c-4cce-afbb-ce5282bdc878 and section_number: 1
2024-12-29 22:21:38 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 22:21:38 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 22:21:38 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 22:21:38 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 22:21:38 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 22:21:38 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 22:21:38 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 22:21:38 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 22:21:38 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 22:21:38 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 22:21:38 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 22:21:38 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 22:21:38 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 22:21:38 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 22:21:38 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:21:38 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 22:21:38 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 22:21:38 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 22:21:38 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 22:21:38 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 22:21:38 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 22:21:38 | INFO     | agents.story_graph:_process_decision:215 -  En attente d'une rÃ©ponse utilisateur pour la section 1
2024-12-29 22:21:38 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 22:21:38 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:21:38 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:21:38 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:21:38 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:21:38 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 22:27:13 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:27:13 | INFO     | managers.agent_manager:initialize_game:210 - Initializing game
2024-12-29 22:27:13 | INFO     | managers.agent_manager:get_story_workflow:261 - Getting story workflow
2024-12-29 22:27:13 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 1488b4b5-d4f5-4368-9b89-285b897ed1f3
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:27:13 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '1488b4b5-d4f5-4368-9b89-285b897ed1f3', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:27:13.216483', 'character_id': 'current'}
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:27:13 | INFO     | managers.workflow_manager:start_workflow:69 - Starting workflow node
2024-12-29 22:27:13 | DEBUG    | managers.workflow_manager:start_workflow:70 - Input data received: Type: <class 'models.game_state.GameState'>, Value: session_id='' game_id='' narrative=None rules=None trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:27:13 | DEBUG    | managers.workflow_manager:start_workflow:81 - Input data is already a GameState
2024-12-29 22:27:13 | DEBUG    | managers.workflow_manager:start_workflow:88 - Creating initial state with session_id and game_id
2024-12-29 22:27:13 | INFO     | managers.state_manager:create_initial_state:325 - Creating initial state with session_id: 5d197b86-35a1-4056-bdf7-c90b44e68941
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key current in namespace characters
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace characters with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\characters\current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for characters/current
2024-12-29 22:27:13 | DEBUG    | managers.state_manager:create_initial_state:352 - Parameters for initial GameState: {'section_number': 1, 'session_id': '5d197b86-35a1-4056-bdf7-c90b44e68941', 'game_id': 'b524319d-8402-4f84-a646-9434df387eaf', 'last_update': '2024-12-29T22:27:13.427093', 'character_id': 'current'}
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:27:13 | DEBUG    | managers.workflow_manager:start_workflow:90 - Validated state session_id: 5d197b86-35a1-4056-bdf7-c90b44e68941 and game_id: b524319d-8402-4f84-a646-9434df387eaf
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:27:13 | INFO     | managers.workflow_manager:start_workflow:109 - Successfully created and saved output with session_id: 5d197b86-35a1-4056-bdf7-c90b44e68941 and section_number: 1
2024-12-29 22:27:13 | INFO     | agents.story_graph:_process_rules:103 - Processing rules for section 1
2024-12-29 22:27:13 | DEBUG    | agents.rules_agent:ainvoke:234 - Processing rules for state: session=, section=1
2024-12-29 22:27:13 | DEBUG    | agents.rules_agent:_process_section_rules:51 - Starting process_section_rules for section 1
2024-12-29 22:27:13 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1_rules in namespace rules
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:259 - Parsing markdown content for section 1
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:278 - Parsed sections: ['Metadata', 'Analysis', 'Choices', 'Summary', 'Error']
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:297 - Parsed metadata: {'last_update': '2024-12-27T18:26:26.567172', 'source': 'llm_analysis', 'source_type': 'processed'}
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:317 - Parsed analysis: {'needs_dice': 'True', 'dice_type': 'none', 'needs_user_response': 'True', 'next_action': 'user_first', 'conditions': 'None', 'target_sections': '48, 398'}
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:191 - Parsing choices from content
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 48
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Engager la procÃ©dure d'Ã©vasion'
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:201 - Parsing choice: 'Continuer votre route'
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:217 - Parsed dice type: none
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:234 - Parsed target section: 398
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_parse_choices:249 - Choice parsed successfully: 'Continuer votre route'
2024-12-29 22:27:13 | INFO     | managers.rules_manager:_parse_choices:254 - Successfully parsed 2 choices
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:327 - Parsed 2 choices
2024-12-29 22:27:13 | DEBUG    | managers.rules_manager:_markdown_to_rules:372 - Creating RulesModel with data: {'section_number': 1, 'dice_type': <DiceType.NONE: 'none'>, 'needs_dice': True, 'needs_user_response': True, 'next_action': 'user_first', 'conditions': [], 'choices_count': 2, 'source': 'llm_analysis', 'source_type': <SourceType.PROCESSED: 'processed'>}
2024-12-29 22:27:13 | INFO     | managers.rules_manager:_markdown_to_rules:384 - Successfully created RulesModel for section 1
2024-12-29 22:27:13 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-29 22:27:13 | INFO     | agents.rules_agent:_process_section_rules:56 - Rules found in cache for section 1
2024-12-29 22:27:13 | DEBUG    | agents.rules_agent:ainvoke:254 - Rules processed successfully
2024-12-29 22:27:13 | DEBUG    | agents.story_graph:_process_rules:119 - Rules processing completed for section 1
2024-12-29 22:27:13 | INFO     | agents.story_graph:_process_narrative:137 - Processing narrative for section 1
2024-12-29 22:27:13 | DEBUG    | agents.narrator_agent:ainvoke:189 - Processing narrative for state: session=, section=1
2024-12-29 22:27:13 | DEBUG    | agents.narrator_agent:_process_section:48 - Starting process_section for section 1
2024-12-29 22:27:13 | INFO     | managers.narrator_manager:get_cached_content:35 - Getting cached content for section 1
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:get_cached_data:181 - Getting data for key section_1 in namespace sections
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:get_cached_data:200 - Found in memory cache
2024-12-29 22:27:13 | DEBUG    | managers.narrator_manager:_markdown_to_narrator:151 - Converting markdown to NarratorModel for section 1
2024-12-29 22:27:13 | DEBUG    | managers.narrator_manager:get_cached_content:48 - Successfully parsed cached content for section 1
2024-12-29 22:27:13 | INFO     | agents.narrator_agent:_process_section:53 - Content found in cache for section 1
2024-12-29 22:27:13 | DEBUG    | agents.narrator_agent:ainvoke:206 - Section processed successfully
2024-12-29 22:27:13 | DEBUG    | agents.story_graph:_process_narrative:157 - Narrative processing completed for section 1
2024-12-29 22:27:13 | DEBUG    | agents.story_graph:_process_decision:213 - No user input to process
2024-12-29 22:27:13 | INFO     | agents.story_graph:_process_decision:215 -  En attente d'une rÃ©ponse utilisateur pour la section 1
2024-12-29 22:27:13 | INFO     | managers.workflow_manager:end_workflow:129 - Ending workflow with output: session=, section=1
2024-12-29 22:27:13 | DEBUG    | managers.workflow_manager:end_workflow:134 - Saving final state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:27:13 | INFO     | managers.workflow_manager:end_workflow:137 - Workflow ended successfully
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:27:13 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:27:13 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:27:13 | INFO     | managers.agent_manager:initialize_game:238 - Game initialization completed successfully
2024-12-29 22:27:13 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:27:13 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 22:27:13 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='1488b4b5-d4f5-4368-9b89-285b897ed1f3' game_id='b524319d-8402-4f84-a646-9434df387eaf' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 29, 22, 27, 13, 493780), last_update=datetime.datetime(2024, 12, 29, 22, 27, 13, 494044)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:27:13 | ERROR    | api.routes.rest.game_route_rest:get_game_state:78 - Failed to get game state: GameResponse.__init__() missing 1 required positional argument: 'success'
2024-12-29 22:28:06 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 22:28:06 | DEBUG    | managers.dependencies:get_agent_manager:38 - Returning existing AgentManager instance
2024-12-29 22:28:06 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 22:28:06 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-29 22:28:06 | DEBUG    | managers.agent_manager:get_state:192 - Fetching current game state
2024-12-29 22:28:06 | DEBUG    | managers.agent_manager:get_state:194 - Current state: session_id='1488b4b5-d4f5-4368-9b89-285b897ed1f3' game_id='b524319d-8402-4f84-a646-9434df387eaf' narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siÃ¨ge antigravitationnel, face aux commandes de votre vaisseau spatial. AprÃ¨s avoir vÃ©rifiÃ© le systÃ¨me de sÃ©curitÃ©, vous examinez attentivement le tableau de bord. Il ne prÃ©sente aucune complexitÃ© : une simple console d'ordinateur reliÃ©e Ã  un terminal de liaison et quelques Ã©crans.\n\nLe circuit micro-Ã©lectronique du systÃ¨me alpha ziridium est profondÃ©ment enfoui dans les entrailles du vaisseau, et vous n'aurez jamais Ã  vous en prÃ©occuper le moins du monde. Si une panne quelconque venait Ã  se dÃ©clarer, ou s'il se produisait le moindre incident, votre ingÃ©nieur robot interviendrait sur-le-champ.\n\nLa prÃ©programmation de votre voyage a Ã©tÃ© Ã©tablie pour vous mener en premier lieu sur Tropos. Vous entamez les procÃ©dures de dÃ©part : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitÃ´t : Â« VÃ©rifications effectuÃ©es. Fonctionnement optimal. Â»\n\nPuis vous passez Ã  la deuxiÃ¨me opÃ©ration : contact avec la tour de contrÃ´le. ParÃ© au dÃ©collage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus Ã  l'accÃ©lÃ©ration s'estompent : vous quittez l'exosphÃ¨re terrienne et pÃ©nÃ©trez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe gÃ©nÃ©rateur gravitationnel est automatiquement enclenchÃ© de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'Ã  vos robots, de vous dÃ©placer librement. Vous allumez l'Ã©cran de vision rÃ©trospective pour observer une derniÃ¨re fois la Terre qui rÃ©trÃ©cit et s'Ã©loigne, des bancs de nuages glissent paresseusement et le soleil se rÃ©flÃ©chit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait Ã©tÃ© donnÃ©e Ã  maintes reprises de contempler ce spectacle au cours de vos voyages vers VÃ©nus ou vers Mercure, vous ressentez toujours, Ã  sa vue, un petit pincement au cÅur et une Ã©motion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'Ã©paules, vous chassez ces pensÃ©es car seul, compte, dÃ©sormais, votre mission.\n\nDes heures s'Ã©coulent, uniformes et lentes. Puis votre Ã©cran revient soudain Ã  la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la mÃªme trajectoire que vous tout en maintenant soigneusement un Ã©cart constant. Cela ressemble Ã  s'y mÃ©prendre Ã  une filature.\n\nAllez-vous donner l'ordre Ã  votre ordinateur d'engager la procÃ©dure d'Ã©vasion (rendez-vous au [[48]]) ou prÃ©fÃ©rez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2024, 12, 29, 22, 27, 13, 493780), last_update=datetime.datetime(2024, 12, 29, 22, 27, 13, 494044)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=True, needs_user_response=True, next_action='user_first', conditions=[], choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2024, 12, 27, 18, 26, 26, 567172)) trace=None character=None decision=None error=None section_number=1 player_input=None content=None
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_current in namespace state
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:28:06 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:28:06 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_current.json
2024-12-29 22:28:06 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_current
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:148 - Saving data for key game_b524319d-8402-4f84-a646-9434df387eaf_section_1 in namespace state
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:167 - Serializing data for storage
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2024-12-29 22:28:06 | DEBUG    | managers.cache_manager:save_cached_data:170 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:28:06 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:28:06 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\b524319d-8402-4f84-a646-9434df387eaf\states\game_b524319d-8402-4f84-a646-9434df387eaf_section_1.json
2024-12-29 22:28:06 | INFO     | managers.cache_manager:save_cached_data:172 - Successfully saved data for state/game_b524319d-8402-4f84-a646-9434df387eaf_section_1
2024-12-29 22:28:06 | INFO     | managers.agent_manager:stop_game:335 - Final game state saved successfully
2024-12-29 22:28:06 | INFO     | managers.agent_manager:stop_game:337 - Game stopped successfully
2024-12-29 22:28:06 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 22:28:09 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:28:14 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:28:14 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 22:28:28 | INFO     | api.app:lifespan:75 - Shutting down...
2024-12-29 22:28:28 | INFO     | managers.dependencies:get_agent_manager:19 - Creating new AgentManager instance
2024-12-29 22:28:28 | DEBUG    | managers.dependencies:get_agent_manager:21 - Creating new GameFactory instance
2024-12-29 22:28:28 | INFO     | managers.filesystem_adapter:__init__:27 - Initializing FileSystemAdapter
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:32 - Creating base directory: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for raw_content: C:\Users\erpes\Desktop\casys-rpg\data\sections
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for rules: C:\Users\erpes\Desktop\casys-rpg\data\cache\rules
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:39 - Creating namespace directory for sections: C:\Users\erpes\Desktop\casys-rpg\data\cache\sections
2024-12-29 22:28:28 | INFO     | managers.filesystem_adapter:__init__:42 - FileSystemAdapter initialized successfully
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:43 - Base path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:28:28 | DEBUG    | managers.filesystem_adapter:__init__:44 - Encoding: utf-8
2024-12-29 22:28:28 | DEBUG    | managers.cache_manager:__init__:53 - CacheManager initialized with config: StorageConfig
2024-12-29 22:28:28 | DEBUG    | managers.cache_manager:__init__:54 - Base storage path: C:\Users\erpes\Desktop\casys-rpg\data
2024-12-29 22:28:28 | DEBUG    | managers.dependencies:get_agent_manager:25 - Creating game components
2024-12-29 22:28:28 | INFO     | managers.state_manager:__init__:38 - Initializing StateManager
2024-12-29 22:28:28 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-29 22:28:28 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: StorageConfig
2024-12-29 22:28:28 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-29 22:28:28 | DEBUG    | managers.narrator_manager:__init__:31 - NarratorManager initialized with config: StorageConfig
2024-12-29 22:28:28 | INFO     | managers.workflow_manager:__init__:32 - Initializing WorkflowManager
2024-12-29 22:28:28 | DEBUG    | managers.workflow_manager:__init__:35 - WorkflowManager initialized with state_manager: StateManager, rules_manager: RulesManager
2024-12-29 22:28:30 | DEBUG    | managers.dependencies:get_agent_manager:29 - Initializing AgentManager with components
2024-12-29 22:28:30 | INFO     | managers.agent_manager:__init__:121 - Initializing AgentManager
2024-12-29 22:28:30 | INFO     | managers.agent_manager:__init__:133 - AgentManager initialization completed
2024-12-29 22:28:30 | INFO     | managers.dependencies:get_agent_manager:36 - AgentManager initialized successfully
2024-12-29 22:28:30 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2024-12-29 22:28:30 | INFO     | managers.agent_manager:stop_game:323 - Stopping game...
2024-12-29 22:28:30 | DEBUG    | managers.agent_manager:stop_game:328 - No game ID set, nothing to save
2024-12-29 22:28:30 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
2024-12-29 22:28:31 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:28:49 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:31:56 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:32:11 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:33:14 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:33:36 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:33:43 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:33:49 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:34:08 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:34:21 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:34:39 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:35:12 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:36:22 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:36:36 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:38:46 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:39:48 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:39:53 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:39:53 | INFO     | api.app:lifespan:72 - Starting up...
2024-12-29 22:43:22 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:43:24 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-29 22:43:24 | DEBUG    | config.logging_config:log_env_variables:80 - Environment variables:
2024-12-29 22:43:24 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_HOST: None
2024-12-29 22:43:24 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_PORT: 8000
2024-12-29 22:43:24 | DEBUG    | config.logging_config:log_env_variables:83 - CASYS_RELOAD: None
2024-12-29 22:43:24 | DEBUG    | config.logging_config:log_env_variables:83 - LOG_LEVEL: DEBUG
2024-12-29 22:43:24 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-29 22:43:24 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:43:26 | SUCCESS  | config.logging_config:setup_logging:61 - Logging configured successfully
2024-12-29 22:43:26 | INFO     | api.app:lifespan:72 - Starting up...
