2025-01-13 14:26:54 | DEBUG    | managers.dependencies:get_agent_manager:81 - Returning existing AgentManager instance
2025-01-13 14:26:54 | DEBUG    | api.app:shutdown_event:60 - Cleaning up AgentManager
2025-01-13 14:26:54 | INFO     | managers.agent_manager:stop_game:327 - Stopping game...
2025-01-13 14:26:54 | DEBUG    | managers.agent_manager:get_state:107 - Fetching current game state
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:395 - Saving state, input narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:validate_state:176 - Validating state data: session_id='b865d863-053f-4e02-a4d3-90ffcb421a3e' game_id='33f056e4-e680-4f51-ab20-330df3d1ec3b' metadata={'node': 'start'} should_continue=False narrative=NarratorModel(section_number=1, content="Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vaisseau spatial. Après avoir vérifié le système de sécurité, vous examinez attentivement le tableau de bord. Il ne présente aucune complexité : une simple console d'ordinateur reliée à un terminal de liaison et quelques écrans.\n\nLe circuit micro-électronique du système alpha ziridium est profondément enfoui dans les entrailles du vaisseau, et vous n'aurez jamais à vous en préoccuper le moins du monde. Si une panne quelconque venait à se déclarer, ou s'il se produisait le moindre incident, votre ingénieur robot interviendrait sur-le-champ.\n\nLa préprogrammation de votre voyage a été établie pour vous mener en premier lieu sur Tropos. Vous entamez les procédures de départ : interrogation de l'ordinateur concernant tous les points vitaux du vaisseau. Une voix impersonnelle se fait entendre aussitôt : « Vérifications effectuées. Fonctionnement optimal. »\n\nPuis vous passez à la deuxième opération : contact avec la tour de contrôle. Paré au décollage ! Vous appuyez sur un bouton... et c'est le grand voyage. Au bout de quelques minutes, les malaises dus à l'accélération s'estompent : vous quittez l'exosphère terrienne et pénétrez dans la nuit spatiale, aussi noire que de l'encre.\n\nLe générateur gravitationnel est automatiquement enclenché, de sorte que la pesanteur normale est maintenue dans votre vaisseau, ce qui vous permet, ainsi qu'à vos robots, de vous déplacer librement. Vous allumez l'écran de vision rétrospective pour observer une dernière fois la Terre qui rétrécit et s'éloigne. Des bancs de nuages glissent paresseusement et le soleil se réfléchit sur les glaces polaires du cercle arctique.\n\nBien que l'occasion vous ait été donnée à maintes reprises de contempler ce spectacle au cours de vos voyages vers Vénus ou vers Mercure, vous ressentez toujours, à sa vue, un petit pincement au cœur et une émotion nostalgique. Reverrez-vous jamais la Terre ? D'un haussement d'épaules, vous chassez ces pensées car seul, compte, désormais, votre mission.\n\nDes heures s'écoulent, uniformes et lentes. Puis votre écran revient soudain à la vie. L'ordinateur de bord vous avertit qu'un autre vaisseau spatial suit la même trajectoire que vous tout en maintenant soigneusement un écart constant. Cela ressemble à s'y méprendre à une filature.\n\nAllez-vous donner l'ordre à votre ordinateur d'engager la procédure d'évasion (rendez-vous au [[48]]) ou préférez-vous continuer votre route (rendez-vous au [[398]]) ?", source_type=<SourceType.RAW: 'raw'>, error=None, timestamp=datetime.datetime(2025, 1, 13, 11, 56, 58, 406128), last_update=datetime.datetime(2025, 1, 13, 11, 56, 58, 406155)) rules=RulesModel(section_number=1, dice_type=<DiceType.NONE: 'none'>, needs_dice=False, needs_user_response=True, next_action=None, conditions=[], choices=[Choice(text="Engager la procédure d'évasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})], rules_summary="Le joueur doit choisir entre engager la procédure d'évasion ou continuer sa route.", error=None, source='llm_analysis', source_type=<SourceType.PROCESSED: 'processed'>, last_update=datetime.datetime(2025, 1, 9, 14, 31, 21, 866475)) decision=DecisionModel(section_number=1, next_section=None, player_input=None, error=None, awaiting_action=<ActionType.USER_INPUT: 'user_input'>, conditions=[], timestamp=datetime.datetime(2025, 1, 13, 11, 56, 58, 427932), next_action=None) trace=None character=CharacterModel(name='Hero', stats=CharacterStats(endurance=20, chance=20, skill=20), inventory=Inventory(items={}, capacity=10, gold=0)) error=None section_number=1
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:validate_state:179 - Input is GameState, narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:_validate_format:135 - Validating format for state, narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:_validate_format:145 - Checking narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:_validate_format:152 - Format validation successful, narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:403 - State validated, narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:408 - State serialized, narrative content in json: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:151 - Saving data for key game_33f056e4-e680-4f51-ab20-330df3d1ec3b_current in namespace state
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:170 - Serializing data for storage
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:173 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_current.json
2025-01-13 14:26:54 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_current.json
2025-01-13 14:26:54 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_current.json
2025-01-13 14:26:54 | INFO     | managers.cache_manager:save_cached_data:175 - Successfully saved data for state/game_33f056e4-e680-4f51-ab20-330df3d1ec3b_current
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:417 - Current state saved to cache
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:151 - Saving data for key game_33f056e4-e680-4f51-ab20-330df3d1ec3b_section_1 in namespace state
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:170 - Serializing data for storage
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:_serialize_data:72 - Serializing data for namespace state with format StorageFormat.JSON
2025-01-13 14:26:54 | DEBUG    | managers.cache_manager:save_cached_data:173 - Saving to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_section_1.json
2025-01-13 14:26:54 | DEBUG    | managers.filesystem_adapter:write_file_async:67 - Writing to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_section_1.json
2025-01-13 14:26:54 | DEBUG    | managers.filesystem_adapter:write_file_async:82 - Successfully wrote to file: C:\Users\erpes\Desktop\casys-rpg\data\cache\games\33f056e4-e680-4f51-ab20-330df3d1ec3b\states\game_33f056e4-e680-4f51-ab20-330df3d1ec3b_section_1.json
2025-01-13 14:26:54 | INFO     | managers.cache_manager:save_cached_data:175 - Successfully saved data for state/game_33f056e4-e680-4f51-ab20-330df3d1ec3b_section_1
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:425 - Section state saved to cache
2025-01-13 14:26:54 | DEBUG    | managers.state_manager:save_state:428 - Current state updated, final narrative content: Vous vous enfoncez confortablement dans le siège antigravitationnel, face aux commandes de votre vai...
2025-01-13 14:26:54 | INFO     | managers.agent_manager:stop_game:339 - Final game state saved successfully
2025-01-13 14:26:54 | INFO     | managers.agent_manager:stop_game:341 - Game stopped successfully
2025-01-13 14:26:54 | INFO     | api.app:shutdown_event:63 - API shutdown successfully
