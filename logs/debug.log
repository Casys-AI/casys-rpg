2024-12-24 00:35:48 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:35:48 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:35:50 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-24 00:35:50 | DEBUG    | config.logging_config:log_env_variables:90 - Environment variables:
2024-12-24 00:35:50 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_HOST: None
2024-12-24 00:35:50 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_PORT: 8000
2024-12-24 00:35:50 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_RELOAD: None
2024-12-24 00:35:50 | DEBUG    | config.logging_config:log_env_variables:93 - LOG_LEVEL: DEBUG
2024-12-24 00:35:50 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-24 00:35:50 | INFO     | api.app:get_agent_manager:94 - Creating new AgentManager instance
2024-12-24 00:35:50 | DEBUG    | api.app:get_agent_manager:96 - Creating new GameFactory instance
2024-12-24 00:35:50 | DEBUG    | api.app:get_agent_manager:100 - Creating game components
2024-12-24 00:35:50 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:35:50 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:35:50 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:35:50 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:35:50 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:35:50 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:35:50 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:35:50 | DEBUG    | api.app:get_agent_manager:104 - Initializing AgentManager with components
2024-12-24 00:35:50 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:35:50 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:35:50 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:35:50 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:35:50 | INFO     | api.app:get_agent_manager:110 - AgentManager initialized successfully
2024-12-24 00:35:50 | DEBUG    | __main__:<module>:44 - Agent manager initialized successfully
2024-12-24 00:35:51 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:35:51 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:35:52 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:35:52 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:35:52 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:35:52 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:35:52 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:35:52 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:35:52 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:35:52 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:35:52 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:35:52 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:35:52 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:35:52 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:35:53 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:35:53 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:35:53 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:35:53 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:35:53 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:35:53 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:38:05 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'api\app.py'. Reloading...
2024-12-24 00:38:05 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:38:05 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:38:05 | INFO     | managers.agent_manager:stop_game:500 - Stopping game session
2024-12-24 00:38:05 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:38:05 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:38:05 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:38:05 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:38:05 | DEBUG    | managers.agent_manager:stop_game:509 - Saving trace data
2024-12-24 00:38:05 | DEBUG    | managers.agent_manager:stop_game:513 - Clearing cache
2024-12-24 00:38:05 | ERROR    | managers.agent_manager:stop_game:523 - Error stopping game session: %s
2024-12-24 00:38:05 | ERROR    | managers.agent_manager:stop_game:524 - Stack trace:
2024-12-24 00:38:05 | ERROR    | api.app:shutdown_event:134 - Failed to shutdown API: 'CacheManager' object has no attribute 'clear'
2024-12-24 00:38:06 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 146, in lifespan
    await shutdown_event()
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 125, in shutdown_event
    await _agent_manager.stop_game()
  File "C:\Users\erpes\Desktop\casys-rpg\managers\agent_manager.py", line 514, in stop_game
    await self.cache_manager.clear()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CacheManager' object has no attribute 'clear'

2024-12-24 00:38:06 | ERROR    | logging:callHandlers:1736 - Application shutdown failed. Exiting.
2024-12-24 00:38:06 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:38:06 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:38:09 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:38:09 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:38:09 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:38:09 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:38:09 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:38:09 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:38:10 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:38:10 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:38:10 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:38:10 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:38:10 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:38:10 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:38:10 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:38:10 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:38:10 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:38:10 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:38:10 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:38:10 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:38:58 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:38:58 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:38:58 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:38:58 | INFO     | managers.agent_manager:stop_game:500 - Stopping game session
2024-12-24 00:38:58 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:38:58 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:38:58 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:38:58 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:38:58 | DEBUG    | managers.agent_manager:stop_game:509 - Saving trace data
2024-12-24 00:38:58 | DEBUG    | managers.agent_manager:stop_game:513 - Clearing cache
2024-12-24 00:38:58 | ERROR    | managers.agent_manager:stop_game:523 - Error stopping game session: %s
2024-12-24 00:38:58 | ERROR    | managers.agent_manager:stop_game:524 - Stack trace:
2024-12-24 00:38:58 | ERROR    | api.app:shutdown_event:134 - Failed to shutdown API: 'CacheManager' object has no attribute 'clear'
2024-12-24 00:38:58 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 146, in lifespan
    await shutdown_event()
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 125, in shutdown_event
    await _agent_manager.stop_game()
  File "C:\Users\erpes\Desktop\casys-rpg\managers\agent_manager.py", line 514, in stop_game
AttributeError: 'CacheManager' object has no attribute 'clear'

2024-12-24 00:38:58 | ERROR    | logging:callHandlers:1736 - Application shutdown failed. Exiting.
2024-12-24 00:38:59 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:38:59 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:39:04 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:39:04 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:39:04 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:39:04 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:39:04 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:39:04 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:39:04 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:39:04 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:39:04 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:39:04 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:39:04 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:39:04 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:39:04 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:39:04 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:39:04 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:39:04 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:39:04 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:39:04 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:39:10 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 00:39:10 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:39:10 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:39:10 | INFO     | managers.agent_manager:stop_game:499 - Stopping game...
2024-12-24 00:39:10 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:39:10 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:39:10 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:39:10 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:39:10 | ERROR    | managers.agent_manager:stop_game:512 - Error stopping game: 'Unknown namespace: game_state'
2024-12-24 00:39:10 | ERROR    | api.app:shutdown_event:134 - Failed to shutdown API: 'Unknown namespace: game_state'
2024-12-24 00:39:10 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 146, in lifespan
    await shutdown_event()
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 125, in shutdown_event
    await _agent_manager.stop_game()
  File "C:\Users\erpes\Desktop\casys-rpg\managers\agent_manager.py", line 507, in stop_game
    await self.cache_manager.clear_namespace_cache('game_state')
  File "C:\Users\erpes\Desktop\casys-rpg\managers\cache_manager.py", line 183, in clear_namespace_cache
KeyError: 'Unknown namespace: game_state'

2024-12-24 00:39:10 | ERROR    | logging:callHandlers:1736 - Application shutdown failed. Exiting.
2024-12-24 00:39:11 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:39:11 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:39:13 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:39:13 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:39:13 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:39:13 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:39:13 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:39:13 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:39:13 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:39:13 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:39:13 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:39:13 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:39:13 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:39:13 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:39:14 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:39:14 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:39:14 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:39:14 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:39:14 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:39:14 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:40:22 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:40:22 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:40:22 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:40:22 | INFO     | managers.agent_manager:stop_game:499 - Stopping game...
2024-12-24 00:40:22 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:40:22 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:40:22 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:40:22 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:40:22 | ERROR    | managers.agent_manager:stop_game:512 - Error stopping game: 'Unknown namespace: game_state'
2024-12-24 00:40:22 | ERROR    | api.app:shutdown_event:134 - Failed to shutdown API: 'Unknown namespace: game_state'
2024-12-24 00:40:22 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 146, in lifespan
    await shutdown_event()
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 125, in shutdown_event
    await _agent_manager.stop_game()
  File "C:\Users\erpes\Desktop\casys-rpg\managers\agent_manager.py", line 507, in stop_game
    logger.info("Game stopped successfully")
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\erpes\Desktop\casys-rpg\managers\cache_manager.py", line 191, in clear_namespace_cache
    raise KeyError(f"Unknown namespace: {namespace}")
KeyError: 'Unknown namespace: game_state'

2024-12-24 00:40:22 | ERROR    | logging:callHandlers:1736 - Application shutdown failed. Exiting.
2024-12-24 00:40:23 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:40:23 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:40:26 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:40:26 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:40:26 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:40:26 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:40:26 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:40:26 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:40:26 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:40:26 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:40:26 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:40:26 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:40:26 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:40:26 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:40:27 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:40:27 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:40:27 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:40:27 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:40:27 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:40:27 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:40:52 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:40:52 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:40:52 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:40:52 | INFO     | managers.agent_manager:stop_game:499 - Stopping game...
2024-12-24 00:40:52 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:40:52 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:40:52 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:40:52 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:40:52 | INFO     | managers.agent_manager:stop_game:507 - Game stopped successfully
2024-12-24 00:40:52 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:40:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:40:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:40:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:40:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:40:55 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:40:55 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:40:55 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:40:55 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:40:55 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:40:55 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:40:55 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:40:55 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:40:55 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:40:55 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:40:56 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:40:56 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:40:56 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:40:56 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:40:56 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:40:56 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:40:58 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:40:59 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:40:59 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:40:59 | INFO     | managers.agent_manager:stop_game:499 - Stopping game...
2024-12-24 00:40:59 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:40:59 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:40:59 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:40:59 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:40:59 | INFO     | managers.agent_manager:stop_game:507 - Game stopped successfully
2024-12-24 00:40:59 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:40:59 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:40:59 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:41:02 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:41:02 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:41:02 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:41:02 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:41:02 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:41:02 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:41:02 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:41:02 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:41:02 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:41:02 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:41:02 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:41:02 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:41:03 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:41:03 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:41:03 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:41:03 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:41:03 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:41:03 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:41:37 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:41:37 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:41:37 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:41:37 | INFO     | managers.agent_manager:stop_game:499 - Stopping game...
2024-12-24 00:41:37 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:41:37 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:41:37 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:41:37 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:41:37 | INFO     | managers.agent_manager:stop_game:507 - Game stopped successfully
2024-12-24 00:41:37 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:41:38 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:41:38 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:41:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:41:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:41:41 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:41:41 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:41:41 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:41:41 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:41:41 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:41:41 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:41:41 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:41:41 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:41:41 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:41:41 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:41:42 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:41:42 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:41:42 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:41:42 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:41:42 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:41:42 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:42:25 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\agent_manager_protocol.py'. Reloading...
2024-12-24 00:42:25 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:42:25 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:42:25 | INFO     | managers.agent_manager:stop_game:507 - Stopping game...
2024-12-24 00:42:25 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:42:25 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:42:25 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:42:25 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:42:25 | INFO     | managers.agent_manager:stop_game:515 - Game stopped successfully
2024-12-24 00:42:25 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:42:26 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:42:26 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:42:29 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:42:29 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:42:29 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:42:29 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:42:29 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:42:29 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:42:29 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:42:29 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:42:29 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:42:29 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:42:29 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:42:29 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:42:29 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:42:29 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:42:29 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:42:29 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:42:29 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:42:29 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:42:36 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:42:36 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:42:36 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:42:36 | INFO     | managers.agent_manager:stop_game:507 - Stopping game...
2024-12-24 00:42:36 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:42:36 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:42:36 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:42:36 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:42:36 | INFO     | managers.agent_manager:stop_game:515 - Game stopped successfully
2024-12-24 00:42:36 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:42:36 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:42:36 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:42:38 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:42:38 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:42:38 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:42:38 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:42:38 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:42:38 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:42:38 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:42:38 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:42:38 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:42:38 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:42:38 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:42:38 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:42:39 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:42:39 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:42:39 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:42:39 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:42:39 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:42:39 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:43:48 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\state_manager_protocol.py'. Reloading...
2024-12-24 00:43:48 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:43:48 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:43:48 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:43:48 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:43:48 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:43:48 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:43:48 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:43:48 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:43:48 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:43:49 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:43:49 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:43:53 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\state_manager_protocol.py'. Reloading...
2024-12-24 00:43:54 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:43:54 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:43:57 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\state_manager_protocol.py'. Reloading...
2024-12-24 00:43:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:43:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:44:01 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:44:01 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:44:01 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:44:01 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:44:01 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:44:01 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:44:01 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:44:01 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:44:01 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:44:01 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:44:01 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:44:01 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:44:03 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:44:03 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:44:03 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:44:03 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:44:03 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:44:03 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:45:06 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\workflow_manager_protocol.py'. Reloading...
2024-12-24 00:45:06 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:45:06 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:45:06 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:45:06 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:45:06 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:45:06 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:45:06 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:45:06 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:45:06 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:45:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:11 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:11 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:11 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:45:11 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:45:11 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:45:11 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:45:11 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:45:11 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:45:11 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:45:11 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:45:11 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:45:11 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:45:12 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:45:12 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:45:12 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:45:12 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:45:12 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:45:12 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:45:17 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\rules_manager_protocol.py'. Reloading...
2024-12-24 00:45:17 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:45:17 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:45:17 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:45:17 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:45:17 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:45:17 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:45:17 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:45:17 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:45:17 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:45:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:21 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:21 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:21 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:45:21 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:45:21 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:45:21 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:45:21 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:45:21 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:45:21 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:45:21 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:45:21 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:45:21 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:45:22 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:45:22 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:45:22 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:45:22 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:45:22 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:45:22 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:45:28 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\narrator_manager_protocol.py'. Reloading...
2024-12-24 00:45:28 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:45:28 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:45:28 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:45:28 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:45:28 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:45:28 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:45:28 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:45:28 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:45:28 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:45:29 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:29 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:32 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:45:32 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:45:32 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:45:32 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:45:32 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:45:32 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:45:32 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:45:32 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:45:32 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:45:32 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:45:32 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:45:32 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:45:33 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:45:33 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:45:33 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:45:33 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:45:33 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:45:33 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:46:15 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\workflow_manager_protocol.py'. Reloading...
2024-12-24 00:46:15 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:46:15 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:46:15 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:46:15 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:46:15 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:46:15 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:46:15 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:46:15 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:46:15 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:46:15 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:46:15 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:46:19 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:46:19 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:46:19 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:46:19 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:46:19 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:46:19 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:46:19 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:46:19 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:46:19 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:46:19 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:46:19 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:46:19 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:46:19 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:46:19 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:46:19 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:46:19 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:46:19 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:46:19 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:49:23 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\state_manager_protocol.py'. Reloading...
2024-12-24 00:49:23 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:49:23 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:49:23 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:49:23 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:49:23 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:49:23 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:49:23 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:49:23 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:49:23 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:49:23 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:49:23 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:49:26 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:49:26 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:49:26 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:49:26 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:49:26 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:49:26 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:49:26 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:49:26 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:49:26 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:49:26 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:49:26 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:49:26 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:49:27 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:49:27 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:49:27 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:49:27 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:49:27 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:49:27 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:50:23 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\rules_manager_protocol.py'. Reloading...
2024-12-24 00:50:23 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:50:23 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:50:23 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:50:23 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:50:23 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:50:23 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:50:23 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:50:23 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:50:23 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:50:23 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:23 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:26 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:26 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:26 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:50:26 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:50:26 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:50:26 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:50:26 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:50:26 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:50:26 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:50:26 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:50:26 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:50:26 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:50:27 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:50:27 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:50:27 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:50:27 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:50:27 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:50:27 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:50:38 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\narrator_manager_protocol.py'. Reloading...
2024-12-24 00:50:38 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:50:38 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:50:38 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:50:38 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:50:38 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:50:38 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:50:38 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:50:38 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:50:38 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:50:39 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:39 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:43 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:43 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:43 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:50:43 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:50:43 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:50:43 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:50:43 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:50:43 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:50:43 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:50:43 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:50:43 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:50:43 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:50:44 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:50:44 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:50:44 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:50:44 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:50:44 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:50:44 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:50:52 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:50:53 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:50:53 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:50:53 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:50:53 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:50:53 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:50:53 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:50:53 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:50:53 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:50:53 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:50:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:50:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:50:57 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:50:57 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:50:57 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:50:57 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:50:57 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:50:57 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:50:57 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:50:57 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:50:57 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:50:57 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:50:58 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:50:58 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:50:58 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:50:58 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:50:58 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:50:58 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:51:43 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\trace_manager_protocol.py'. Reloading...
2024-12-24 00:51:43 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:51:43 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:51:43 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:51:43 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:51:43 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:51:43 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:51:43 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:51:43 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:51:43 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:51:44 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:51:44 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:51:47 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:51:47 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:51:47 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:51:47 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:51:47 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:51:47 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:51:47 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:51:47 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:51:47 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:51:47 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:51:47 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:51:47 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:51:48 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:51:48 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:51:48 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:51:48 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:51:48 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:51:48 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:52:04 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\protocols\agent_manager_protocol.py'. Reloading...
2024-12-24 00:52:04 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:52:04 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:52:04 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:52:04 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:52:04 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:52:04 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:52:04 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:52:04 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:52:04 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:52:05 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:52:05 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:52:08 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:52:08 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:52:08 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:52:08 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:52:08 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:52:08 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:52:08 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:52:08 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:52:08 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:52:08 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:52:08 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:52:08 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:52:09 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:52:09 | INFO     | managers.agent_manager:__init__:108 - Initializing AgentManager
2024-12-24 00:52:09 | DEBUG    | managers.agent_manager:__init__:116 - Setting up manager references
2024-12-24 00:52:09 | DEBUG    | managers.agent_manager:__init__:127 - Setting up agent references
2024-12-24 00:52:09 | INFO     | managers.agent_manager:__init__:136 - AgentManager initialization completed
2024-12-24 00:52:09 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:56:42 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:56:42 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:56:42 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:56:42 | INFO     | managers.agent_manager:stop_game:505 - Stopping game...
2024-12-24 00:56:42 | DEBUG    | managers.agent_manager:get_state:296 - Fetching current game state
2024-12-24 00:56:42 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:56:42 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:56:42 | DEBUG    | managers.agent_manager:get_state:298 - Current state: %s
2024-12-24 00:56:42 | INFO     | managers.agent_manager:stop_game:513 - Game stopped successfully
2024-12-24 00:56:42 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:56:43 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:56:43 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:56:47 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:56:47 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:56:47 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:56:47 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:56:47 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:56:47 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:56:47 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:56:47 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:56:47 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:56:47 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:56:47 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:56:47 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:56:48 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:56:48 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 00:56:48 | DEBUG    | managers.agent_manager:__init__:160 - Setting up manager references
2024-12-24 00:56:48 | DEBUG    | managers.agent_manager:__init__:171 - Setting up agent references
2024-12-24 00:56:48 | INFO     | managers.agent_manager:__init__:180 - AgentManager initialization completed
2024-12-24 00:56:48 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:58:10 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:58:10 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:58:10 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:58:10 | INFO     | managers.agent_manager:stop_game:549 - Stopping game...
2024-12-24 00:58:10 | DEBUG    | managers.agent_manager:get_state:340 - Fetching current game state
2024-12-24 00:58:10 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:58:10 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:58:10 | DEBUG    | managers.agent_manager:get_state:342 - Current state: %s
2024-12-24 00:58:10 | INFO     | managers.agent_manager:stop_game:557 - Game stopped successfully
2024-12-24 00:58:10 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:58:11 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:58:11 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:58:14 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:58:14 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:58:14 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:58:14 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:58:14 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:58:14 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:58:14 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:58:14 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:58:14 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:58:14 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:58:14 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:58:14 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:58:14 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:58:14 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 00:58:14 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 00:58:14 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:58:49 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:58:49 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:58:49 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:58:49 | INFO     | managers.agent_manager:stop_game:531 - Stopping game...
2024-12-24 00:58:49 | DEBUG    | managers.agent_manager:get_state:322 - Fetching current game state
2024-12-24 00:58:49 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:58:49 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:58:49 | DEBUG    | managers.agent_manager:get_state:324 - Current state: %s
2024-12-24 00:58:49 | INFO     | managers.agent_manager:stop_game:539 - Game stopped successfully
2024-12-24 00:58:49 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:58:50 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:58:50 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:58:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:58:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:58:53 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:58:53 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:58:53 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:58:53 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:58:53 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:58:53 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:58:53 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:58:53 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:58:53 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:58:53 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:58:54 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:58:54 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 00:58:54 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 00:58:54 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 00:59:51 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 00:59:51 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 00:59:51 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 00:59:51 | INFO     | managers.agent_manager:stop_game:529 - Stopping game...
2024-12-24 00:59:51 | DEBUG    | managers.agent_manager:get_state:320 - Fetching current game state
2024-12-24 00:59:51 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 00:59:51 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 00:59:51 | DEBUG    | managers.agent_manager:get_state:322 - Current state: %s
2024-12-24 00:59:51 | INFO     | managers.agent_manager:stop_game:537 - Game stopped successfully
2024-12-24 00:59:51 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 00:59:52 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:59:52 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:59:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 00:59:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 00:59:55 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 00:59:55 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 00:59:55 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 00:59:55 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 00:59:55 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 00:59:55 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 00:59:55 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 00:59:55 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 00:59:55 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 00:59:55 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 00:59:57 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 00:59:57 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 00:59:57 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 00:59:57 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:00:52 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:00:52 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:00:52 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:00:52 | INFO     | managers.agent_manager:stop_game:529 - Stopping game...
2024-12-24 01:00:52 | DEBUG    | managers.agent_manager:get_state:320 - Fetching current game state
2024-12-24 01:00:52 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:00:52 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:00:52 | DEBUG    | managers.agent_manager:get_state:322 - Current state: %s
2024-12-24 01:00:52 | INFO     | managers.agent_manager:stop_game:537 - Game stopped successfully
2024-12-24 01:00:52 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:00:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:00:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:00:56 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:00:56 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:00:56 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:00:56 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:00:56 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:00:56 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:00:56 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:00:56 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:00:56 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:00:56 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:00:56 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:00:56 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:00:57 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:00:57 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:00:57 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:00:57 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:03:09 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:03:09 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:03:09 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:03:09 | INFO     | managers.agent_manager:stop_game:526 - Stopping game...
2024-12-24 01:03:09 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 01:03:09 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:03:09 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:03:09 | DEBUG    | managers.agent_manager:get_state:319 - Current state: %s
2024-12-24 01:03:09 | INFO     | managers.agent_manager:stop_game:534 - Game stopped successfully
2024-12-24 01:03:09 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:03:10 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:03:10 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:03:13 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:03:13 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:03:13 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:03:13 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:03:13 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:03:13 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:03:13 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:03:13 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:03:13 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:03:13 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:03:13 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:03:13 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:03:14 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:03:14 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:03:14 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:03:14 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:03:55 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:03:56 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:03:56 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:03:56 | INFO     | managers.agent_manager:stop_game:511 - Stopping game...
2024-12-24 01:03:56 | ERROR    | managers.agent_manager:stop_game:521 - Error stopping game: 'AgentManager' object has no attribute 'get_state'
2024-12-24 01:03:56 | ERROR    | api.app:shutdown_event:134 - Failed to shutdown API: 'AgentManager' object has no attribute 'get_state'
2024-12-24 01:03:56 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 146, in lifespan
    await shutdown_event()
  File "C:\Users\erpes\Desktop\casys-rpg\api\app.py", line 125, in shutdown_event
    await _agent_manager.stop_game()
  File "C:\Users\erpes\Desktop\casys-rpg\managers\agent_manager.py", line 514, in stop_game
    yield state
    
AttributeError: 'AgentManager' object has no attribute 'get_state'

2024-12-24 01:03:56 | ERROR    | logging:callHandlers:1736 - Application shutdown failed. Exiting.
2024-12-24 01:03:56 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:03:56 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:03:59 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:03:59 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:03:59 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:03:59 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:03:59 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:03:59 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:03:59 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:03:59 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:03:59 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:03:59 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:03:59 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:03:59 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:04:00 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:04:00 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:04:00 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:04:00 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:04:37 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:04:37 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:04:37 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:04:37 | INFO     | managers.agent_manager:stop_game:522 - Stopping game...
2024-12-24 01:04:37 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:04:37 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:04:37 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:04:37 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:04:37 | INFO     | managers.agent_manager:stop_game:530 - Game stopped successfully
2024-12-24 01:04:37 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:04:38 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:04:38 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:04:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:04:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:04:41 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:04:41 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:04:41 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:04:41 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:04:41 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:04:41 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:04:41 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:04:41 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:04:41 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:04:41 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:04:41 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:04:41 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:04:41 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:04:41 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:09:13 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 01:09:13 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:09:13 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:09:13 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:09:13 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:09:13 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:09:13 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:09:13 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:09:13 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:09:13 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:09:14 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:09:14 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:09:31 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:09:32 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:09:32 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:14 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 01:10:15 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:15 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:20 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:20 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:20 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:10:20 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:10:20 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:10:20 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:10:20 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:10:20 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:10:20 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:10:20 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:10:20 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:10:20 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:10:21 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:10:21 | INFO     | managers.agent_manager:__init__:148 - Initializing AgentManager
2024-12-24 01:10:21 | INFO     | managers.agent_manager:__init__:163 - AgentManager initialization completed
2024-12-24 01:10:21 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:10:40 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:10:40 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:10:40 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:10:40 | INFO     | managers.agent_manager:stop_game:539 - Stopping game...
2024-12-24 01:10:40 | DEBUG    | managers.agent_manager:get_state:314 - Fetching current game state
2024-12-24 01:10:40 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:10:40 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:10:40 | DEBUG    | managers.agent_manager:get_state:316 - Current state: %s
2024-12-24 01:10:40 | INFO     | managers.agent_manager:stop_game:547 - Game stopped successfully
2024-12-24 01:10:40 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:10:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:44 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:44 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:44 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:10:44 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:10:44 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:10:44 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:10:44 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:10:44 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:10:44 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:10:44 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:10:44 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:10:44 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:10:45 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:10:45 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:10:45 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:10:45 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:10:53 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:10:53 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:10:53 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:10:53 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:10:53 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:10:53 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:10:53 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:10:53 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:10:53 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:10:53 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:10:54 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:54 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:58 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:10:58 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:10:58 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:10:58 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:10:58 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:10:58 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:10:58 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:10:58 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:10:58 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:10:58 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:10:58 | INFO     | managers.workflow_manager:__init__:28 - Initializing WorkflowManager
2024-12-24 01:10:58 | DEBUG    | managers.workflow_manager:__init__:31 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:10:59 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:10:59 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:10:59 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:10:59 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:11:20 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:11:20 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:11:20 | INFO     | api.app:initialize_game:634 - Generated session ID: 11ffa055-ccfd-4eb1-84c3-2de38fbb582d
2024-12-24 01:11:20 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:11:20 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:11:20 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 418eef10-5378-473c-bf56-a3b242f12221
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:11:20 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:11:20 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:11:20 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:11:20 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:337 - Starting game initialization for session 11ffa055-ccfd-4eb1-84c3-2de38fbb582d
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:338 - Init params: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:346 - Starting story graph configuration and setup
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:348 - Configuring story graph instance
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:_configure_story_graph:583 - Configuring story graph
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:_configure_story_graph:592 - Story graph configured successfully
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:353 - Story graph configured successfully, setting up workflow
2024-12-24 01:11:20 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:_setup_workflow:95 - Setting up workflow edges
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:_setup_workflow:121 - Compiling workflow graph
2024-12-24 01:11:20 | INFO     | agents.story_graph:_setup_workflow:124 - LangGraph workflow setup completed successfully
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:356 - Workflow setup completed successfully
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:361 - Story graph configuration and setup completed successfully
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:368 - Creating initial game state
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:374 - Initial state created: session_id='11ffa055-ccfd-4eb1-84c3-2de38fbb582d' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 11, 20, 232245) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:377 - Initializing workflow
2024-12-24 01:11:20 | INFO     | managers.workflow_manager:initialize_workflow:335 - Initializing workflow
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:initialize_workflow:336 - Initial state: session_id='11ffa055-ccfd-4eb1-84c3-2de38fbb582d' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 11, 20, 232245) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:initialize_workflow:339 - Saving initial state
2024-12-24 01:11:20 | INFO     | managers.workflow_manager:initialize_workflow:342 - Workflow initialization completed
2024-12-24 01:11:20 | DEBUG    | managers.agent_manager:initialize_game:380 - Workflow initialized successfully
2024-12-24 01:11:20 | INFO     | managers.agent_manager:initialize_game:386 - Executing initial workflow
2024-12-24 01:11:20 | INFO     | managers.workflow_manager:execute_workflow:214 - Starting workflow execution
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:215 - Story graph: <agents.story_graph.StoryGraph object at 0x000001B8B0783B60>
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Initial state: session_id='11ffa055-ccfd-4eb1-84c3-2de38fbb582d' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 11, 20, 232245) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:217 - User input: None
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:228 - Creating input data for story graph
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:234 - Input data: %s
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Compiling workflow
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:245 - Workflow compiled successfully
2024-12-24 01:11:20 | DEBUG    | managers.workflow_manager:execute_workflow:247 - Executing workflow
2024-12-24 01:11:20 | INFO     | managers.workflow_manager:start_workflow:280 - Starting workflow node
2024-12-24 01:11:20 | ERROR    | managers.workflow_manager:start_workflow:293 - Error in start node: %s
2024-12-24 01:11:20 | DEBUG    | agents.story_graph:route_to_parallel:84 - Routing to parallel nodes: [%s, %s]
2024-12-24 01:11:20 | INFO     | agents.story_graph:_process_rules:133 - Processing rules for section: %s
2024-12-24 01:11:20 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 01:11:20 | INFO     | managers.rules_manager:get_cached_rules:36 - Getting cached rules for section 1
2024-12-24 01:11:20 | INFO     | agents.story_graph:_process_narrative:162 - Processing narrative for section: %s
2024-12-24 01:11:20 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 01:11:20 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 01:11:20 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 01:11:20 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 01:11:20 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:_markdown_to_rules:285 - Parsing markdown content for section %d
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:_markdown_to_rules:304 - Parsed sections: %s
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:_markdown_to_rules:323 - Parsed metadata: %s
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:_markdown_to_rules:343 - Parsed analysis: %s
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:_parse_choices:221 - Parsing choices from content
2024-12-24 01:11:20 | ERROR    | managers.rules_manager:_markdown_to_rules:355 - Error parsing choices section: %s
2024-12-24 01:11:20 | WARNING  | managers.rules_manager:get_cached_rules:52 - Failed to parse cached rules for section 1
2024-12-24 01:11:20 | DEBUG    | agents.rules_agent:process_section_rules:57 - No content provided, fetching raw content
2024-12-24 01:11:20 | INFO     | managers.rules_manager:get_raw_content:64 - Getting raw content for section 1
2024-12-24 01:11:20 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 01:11:20 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 01:11:20 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 01:11:20 | DEBUG    | managers.rules_manager:get_raw_content:82 - Found raw content for section 1
2024-12-24 01:11:20 | INFO     | agents.rules_agent:process_section_rules:69 - Analyzing rules for section 1 with LLM
2024-12-24 01:11:20 | DEBUG    | agents.rules_agent:_extract_rules_with_llm:102 - Starting LLM extraction for section 1
2024-12-24 01:11:26 | DEBUG    | agents.rules_agent:_extract_rules_with_llm:184 - Processed choices: [{'text': "Engager la procÃ©dure d'Ã©vasion", 'type': 'direct', 'target_section': 48, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}, {'text': 'Continuer votre route', 'type': 'direct', 'target_section': 398, 'conditions': [], 'dice_type': 'none', 'dice_results': {}}]
2024-12-24 01:11:26 | DEBUG    | agents.rules_agent:_extract_rules_with_llm:188 - Created RulesModel: section_number=1 dice_type=<DiceType.NONE: 'none'> needs_dice=True needs_user_response=True next_action='user_first' conditions=[] choices=[Choice(text="Engager la procÃ©dure d'Ã©vasion", type=<ChoiceType.DIRECT: 'direct'>, target_section=48, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={}), Choice(text='Continuer votre route', type=<ChoiceType.DIRECT: 'direct'>, target_section=398, conditions=[], dice_type=<DiceType.NONE: 'none'>, dice_results={})] rules_summary="Le joueur doit choisir entre engager la procÃ©dure d'Ã©vasion ou continuer sa route, sans lancer de dÃ©s." error=None source='llm_analysis' source_type=<SourceType.PROCESSED: 'processed'> last_update=datetime.datetime(2024, 12, 24, 1, 11, 26, 315296)
2024-12-24 01:11:26 | DEBUG    | agents.rules_agent:process_section_rules:74 - Analysis successful, saving to cache
2024-12-24 01:11:26 | INFO     | managers.rules_manager:save_rules:106 - Saving rules for section 1
2024-12-24 01:11:26 | DEBUG    | managers.rules_manager:_rules_to_markdown:166 - Converting rules to markdown for section %d
2024-12-24 01:11:26 | DEBUG    | managers.rules_manager:_format_choices:201 - Formatting %d choices
2024-12-24 01:11:26 | DEBUG    | managers.rules_manager:save_rules:115 - Rules saved successfully for section 1
2024-12-24 01:11:26 | INFO     | agents.rules_agent:process_section_rules:79 - Rules saved successfully
2024-12-24 01:11:26 | ERROR    | managers.workflow_manager:execute_workflow:267 - Error executing workflow: %s
2024-12-24 01:11:26 | ERROR    | managers.agent_manager:initialize_game:394 - Error executing initial workflow: Failed to execute workflow: 'GameStateInput' object has no attribute 'rules'
2024-12-24 01:11:26 | ERROR    | managers.agent_manager:initialize_game:401 - Error during game initialization: Failed to execute workflow: 'GameStateInput' object has no attribute 'rules'
2024-12-24 01:11:26 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: 'GameStateInput' object has no attribute 'rules'
2024-12-24 01:11:26 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: 'GameStateInput' object has no attribute 'rules'
2024-12-24 01:11:38 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:11:38 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:11:38 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:11:38 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:11:38 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:11:38 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:11:38 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:11:38 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:11:38 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:12:32 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:12:33 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:12:33 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:12:39 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:12:39 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:12:39 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:12:39 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:12:39 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:12:39 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:12:39 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:12:39 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:12:39 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:12:39 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:12:39 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:12:39 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:12:40 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:12:40 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:12:40 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:12:40 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:13:38 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 01:13:38 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:13:38 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:13:38 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:13:38 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:13:38 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:13:38 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:13:38 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:13:38 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:13:38 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:13:38 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:13:38 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:13:40 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:13:40 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:13:40 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:13:40 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:13:40 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:13:40 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:13:40 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:13:40 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:13:40 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:13:40 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:13:40 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:13:40 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:13:41 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:13:41 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:13:41 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:13:41 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:14:39 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\rules_manager.py'. Reloading...
2024-12-24 01:14:39 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:14:39 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:14:39 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:14:39 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:14:39 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:14:39 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:14:39 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:14:39 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:14:39 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:14:40 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:14:40 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:14:43 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:14:43 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:14:43 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:14:43 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:14:43 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:14:43 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:14:43 | INFO     | managers.rules_manager:__init__:28 - Initializing RulesManager
2024-12-24 01:14:43 | DEBUG    | managers.rules_manager:__init__:32 - RulesManager initialized with config: %s
2024-12-24 01:14:43 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:14:43 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:14:43 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:14:43 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:14:44 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:14:44 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:14:44 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:14:44 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:15:06 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\rules_manager.py'. Reloading...
2024-12-24 01:15:07 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:15:07 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:15:07 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:15:07 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:15:07 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:15:07 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:15:07 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:15:07 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:15:07 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:15:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:15:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:15:10 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:15:10 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:15:10 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:15:10 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:15:10 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:15:10 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:15:10 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:15:10 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:15:10 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:15:10 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:15:10 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:15:10 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:15:11 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:15:11 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:15:11 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:15:11 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:15:27 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 707, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 678, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 2033, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
         ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 148, in __exit__
    next(self.gen)
    ~~~~^^^^^^^^^^
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 700, in lifespan
    await receive()
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

2024-12-24 01:16:16 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:16 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:17 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-24 01:16:17 | DEBUG    | config.logging_config:log_env_variables:90 - Environment variables:
2024-12-24 01:16:17 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_HOST: None
2024-12-24 01:16:17 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_PORT: 8000
2024-12-24 01:16:17 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_RELOAD: None
2024-12-24 01:16:17 | DEBUG    | config.logging_config:log_env_variables:93 - LOG_LEVEL: DEBUG
2024-12-24 01:16:17 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-24 01:16:17 | INFO     | api.app:get_agent_manager:94 - Creating new AgentManager instance
2024-12-24 01:16:17 | DEBUG    | api.app:get_agent_manager:96 - Creating new GameFactory instance
2024-12-24 01:16:17 | DEBUG    | api.app:get_agent_manager:100 - Creating game components
2024-12-24 01:16:17 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:16:17 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:16:17 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:16:17 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:16:17 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:16:17 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:16:17 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:16:18 | DEBUG    | api.app:get_agent_manager:104 - Initializing AgentManager with components
2024-12-24 01:16:18 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:16:18 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:16:18 | INFO     | api.app:get_agent_manager:110 - AgentManager initialized successfully
2024-12-24 01:16:18 | DEBUG    | __main__:<module>:44 - Agent manager initialized successfully
2024-12-24 01:16:18 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:18 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:20 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:20 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:20 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:16:20 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:16:20 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:16:20 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:16:20 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:16:20 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:16:20 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:16:20 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:16:20 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:16:20 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:16:20 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:16:20 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:16:20 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:16:20 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:16:29 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:16:29 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:16:29 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:16:29 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:16:29 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:16:29 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:16:29 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:16:29 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:16:29 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:16:42 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:42 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:44 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-24 01:16:44 | DEBUG    | config.logging_config:log_env_variables:90 - Environment variables:
2024-12-24 01:16:44 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_HOST: None
2024-12-24 01:16:44 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_PORT: 8000
2024-12-24 01:16:44 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_RELOAD: None
2024-12-24 01:16:44 | DEBUG    | config.logging_config:log_env_variables:93 - LOG_LEVEL: DEBUG
2024-12-24 01:16:44 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-24 01:16:44 | INFO     | api.app:get_agent_manager:94 - Creating new AgentManager instance
2024-12-24 01:16:44 | DEBUG    | api.app:get_agent_manager:96 - Creating new GameFactory instance
2024-12-24 01:16:44 | DEBUG    | api.app:get_agent_manager:100 - Creating game components
2024-12-24 01:16:44 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:16:44 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:16:44 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:16:44 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:16:44 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:16:44 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:16:44 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:16:44 | DEBUG    | api.app:get_agent_manager:104 - Initializing AgentManager with components
2024-12-24 01:16:44 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:16:44 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:16:44 | INFO     | api.app:get_agent_manager:110 - AgentManager initialized successfully
2024-12-24 01:16:44 | DEBUG    | __main__:<module>:44 - Agent manager initialized successfully
2024-12-24 01:16:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:46 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:46 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:16:46 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:16:46 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:16:46 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:16:46 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:16:46 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:16:46 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:16:46 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:16:46 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:16:46 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:16:46 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:16:47 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:16:47 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:16:47 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:16:47 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:16:57 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:16:57 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:16:57 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:16:57 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:16:57 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:16:57 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:16:57 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:16:57 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:16:57 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:16:57 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:16:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:16:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:17:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:17:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:17:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:17:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:17:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:17:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:17:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:17:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:17:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:17:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:17:00 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:17:00 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:17:00 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:17:00 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:17:00 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:17:00 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:17:36 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:17:36 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:17:36 | INFO     | api.app:initialize_game:634 - Generated session ID: c4b70c18-3f06-4395-af4c-3c40cddd3e19
2024-12-24 01:17:36 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:17:36 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:17:36 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: fb6992eb-9170-4fce-93e1-38449921f1fb
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:17:36 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:17:36 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:17:36 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:17:36 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:337 - Starting game initialization for session c4b70c18-3f06-4395-af4c-3c40cddd3e19
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:338 - Init params: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:346 - Starting story graph configuration and setup
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:348 - Configuring story graph instance
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:_configure_story_graph:583 - Configuring story graph
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:_configure_story_graph:592 - Story graph configured successfully
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:353 - Story graph configured successfully, setting up workflow
2024-12-24 01:17:36 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:_setup_workflow:109 - Setting up workflow edges
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:_setup_workflow:135 - Compiling workflow graph
2024-12-24 01:17:36 | INFO     | agents.story_graph:_setup_workflow:138 - LangGraph workflow setup completed successfully
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:356 - Workflow setup completed successfully
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:361 - Story graph configuration and setup completed successfully
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:368 - Creating initial game state
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:374 - Initial state created: session_id='c4b70c18-3f06-4395-af4c-3c40cddd3e19' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 17, 36, 684319) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:377 - Initializing workflow
2024-12-24 01:17:36 | INFO     | managers.workflow_manager:initialize_workflow:345 - Initializing workflow
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:initialize_workflow:346 - Initial state: session_id='c4b70c18-3f06-4395-af4c-3c40cddd3e19' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 17, 36, 684319) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:initialize_workflow:349 - Saving initial state
2024-12-24 01:17:36 | INFO     | managers.workflow_manager:initialize_workflow:352 - Workflow initialization completed
2024-12-24 01:17:36 | DEBUG    | managers.agent_manager:initialize_game:380 - Workflow initialized successfully
2024-12-24 01:17:36 | INFO     | managers.agent_manager:initialize_game:386 - Executing initial workflow
2024-12-24 01:17:36 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Story graph: <agents.story_graph.StoryGraph object at 0x000001994E583E00>
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Initial state: session_id='c4b70c18-3f06-4395-af4c-3c40cddd3e19' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 17, 36, 684319) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:218 - User input: None
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:229 - Creating input data for story graph
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:244 - Input data: %s
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:253 - Compiling workflow
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:255 - Workflow compiled successfully
2024-12-24 01:17:36 | DEBUG    | managers.workflow_manager:execute_workflow:257 - Executing workflow
2024-12-24 01:17:36 | INFO     | managers.workflow_manager:start_workflow:290 - Starting workflow node
2024-12-24 01:17:36 | ERROR    | managers.workflow_manager:start_workflow:303 - Error in start node: %s
2024-12-24 01:17:36 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: [%s, %s]
2024-12-24 01:17:36 | INFO     | agents.story_graph:_process_rules:147 - Processing rules for section: %d
2024-12-24 01:17:36 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 01:17:36 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 01:17:36 | INFO     | agents.story_graph:_process_narrative:176 - Processing narrative for section: %d
2024-12-24 01:17:36 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 01:17:36 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 01:17:36 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 01:17:36 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 01:17:36 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %s
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: %s
2024-12-24 01:17:36 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 01:17:36 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 01:17:36 | INFO     | managers.rules_manager:_markdown_to_rules:405 - Successfully created RulesModel for section %d
2024-12-24 01:17:36 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 01:17:36 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 01:17:36 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 01:17:36 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 01:17:36 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 01:17:37 | DEBUG    | agents.story_graph:route_after_parallel:91 - Checking parallel processes completion
2024-12-24 01:17:37 | ERROR    | agents.story_graph:route_after_parallel:93 - Expected GameState but got %s
2024-12-24 01:17:37 | ERROR    | managers.workflow_manager:execute_workflow:277 - Error executing workflow: %s
2024-12-24 01:17:37 | ERROR    | managers.agent_manager:initialize_game:394 - Error executing initial workflow: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:17:37 | ERROR    | managers.agent_manager:initialize_game:401 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:17:37 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:17:37 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:19:23 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\rules_manager.py'. Reloading...
2024-12-24 01:19:24 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:19:24 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:19:24 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:19:24 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:19:24 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:19:24 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:19:24 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:19:24 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:19:24 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:19:24 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:19:24 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:19:28 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:19:28 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:19:28 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:19:28 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:19:28 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:19:28 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:19:28 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:19:28 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:19:28 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:19:28 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:19:28 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:19:28 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:19:29 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:19:29 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:19:29 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:19:29 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:19:45 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\rules_manager.py'. Reloading...
2024-12-24 01:19:45 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:19:45 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:19:45 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:19:45 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:19:45 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:19:45 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:19:45 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:19:45 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:19:45 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:19:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:19:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:19:48 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:19:48 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:19:48 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:19:48 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:19:48 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:19:48 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:19:48 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:19:48 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:19:48 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:19:48 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:19:48 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:19:48 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:19:48 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:19:48 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:19:48 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:19:48 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:19:56 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\rules_manager.py'. Reloading...
2024-12-24 01:19:56 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:19:56 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:19:56 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:19:56 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:19:56 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:19:56 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:19:56 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:19:56 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:19:56 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:19:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:19:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:20:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:20:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:20:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:20:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:20:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:20:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:20:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:20:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:20:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:20:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:20:00 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:20:00 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:20:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:20:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:20:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:20:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:20:55 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 01:20:55 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:20:55 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:20:55 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:20:55 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:20:55 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:20:55 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:20:55 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:20:55 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:20:55 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:20:56 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:20:56 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:20:59 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:20:59 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:20:59 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:20:59 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:20:59 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:20:59 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:20:59 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:20:59 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:20:59 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:20:59 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:20:59 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:20:59 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:21:00 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:21:00 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:21:00 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:21:00 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:29:02 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:29:02 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:29:02 | INFO     | api.app:initialize_game:634 - Generated session ID: 18dcdfc5-0564-46ac-b9cc-e986fb462544
2024-12-24 01:29:02 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:29:02 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:29:02 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 1c41f165-f838-4277-94a3-fcbb236a81b0
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:29:02 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:29:02 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:29:02 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:29:02 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:337 - Starting game initialization for session 18dcdfc5-0564-46ac-b9cc-e986fb462544
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:338 - Init params: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:346 - Starting story graph configuration and setup
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:348 - Configuring story graph instance
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:_configure_story_graph:583 - Configuring story graph
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:_configure_story_graph:592 - Story graph configured successfully
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:353 - Story graph configured successfully, setting up workflow
2024-12-24 01:29:02 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:_setup_workflow:111 - Setting up workflow edges
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:_setup_workflow:137 - Compiling workflow graph
2024-12-24 01:29:02 | INFO     | agents.story_graph:_setup_workflow:140 - LangGraph workflow setup completed successfully
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:356 - Workflow setup completed successfully
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:361 - Story graph configuration and setup completed successfully
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:368 - Creating initial game state
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:374 - Initial state created: session_id='18dcdfc5-0564-46ac-b9cc-e986fb462544' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 29, 2, 951584) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:377 - Initializing workflow
2024-12-24 01:29:02 | INFO     | managers.workflow_manager:initialize_workflow:345 - Initializing workflow
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:initialize_workflow:346 - Initial state: session_id='18dcdfc5-0564-46ac-b9cc-e986fb462544' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 29, 2, 951584) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:initialize_workflow:349 - Saving initial state
2024-12-24 01:29:02 | INFO     | managers.workflow_manager:initialize_workflow:352 - Workflow initialization completed
2024-12-24 01:29:02 | DEBUG    | managers.agent_manager:initialize_game:380 - Workflow initialized successfully
2024-12-24 01:29:02 | INFO     | managers.agent_manager:initialize_game:386 - Executing initial workflow
2024-12-24 01:29:02 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Story graph: <agents.story_graph.StoryGraph object at 0x000001F774883E00>
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Initial state: session_id='18dcdfc5-0564-46ac-b9cc-e986fb462544' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 29, 2, 951584) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:218 - User input: None
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:229 - Creating input data for story graph
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:244 - Input data: %s
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:253 - Compiling workflow
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:255 - Workflow compiled successfully
2024-12-24 01:29:02 | DEBUG    | managers.workflow_manager:execute_workflow:257 - Executing workflow
2024-12-24 01:29:02 | INFO     | managers.workflow_manager:start_workflow:290 - Starting workflow node
2024-12-24 01:29:02 | ERROR    | managers.workflow_manager:start_workflow:303 - Error in start node: %s
2024-12-24 01:29:02 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 01:29:02 | INFO     | agents.story_graph:_process_rules:149 - Processing rules for section %d
2024-12-24 01:29:02 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 01:29:02 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 01:29:02 | INFO     | agents.story_graph:_process_narrative:180 - Processing narrative for section %d
2024-12-24 01:29:02 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 01:29:02 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 01:29:02 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 01:29:02 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 01:29:02 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 01:29:02 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 01:29:03 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 01:29:03 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 01:29:03 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 01:29:03 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 01:29:03 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 01:29:03 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 01:29:03 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 01:29:03 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 01:29:03 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 01:29:03 | DEBUG    | agents.story_graph:_process_rules:168 - Rules processing completed for section %d
2024-12-24 01:29:03 | DEBUG    | agents.story_graph:route_after_parallel:91 - Checking parallel processes completion
2024-12-24 01:29:03 | ERROR    | agents.story_graph:route_after_parallel:93 - Expected GameState but got '%s'
2024-12-24 01:29:03 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 01:29:03 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 01:29:03 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 01:29:03 | ERROR    | managers.workflow_manager:execute_workflow:277 - Error executing workflow: %s
2024-12-24 01:29:03 | ERROR    | managers.agent_manager:initialize_game:394 - Error executing initial workflow: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:29:03 | ERROR    | managers.agent_manager:initialize_game:401 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:29:03 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:29:03 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 01:29:30 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:29:30 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:29:30 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:29:30 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:29:30 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:29:30 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:29:30 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:29:30 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:29:30 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:29:30 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:29:30 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:29:30 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:29:33 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:29:33 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:29:33 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:29:33 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:29:33 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:29:33 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:29:33 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:29:33 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:29:33 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:29:33 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:29:33 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:29:33 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:29:34 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:29:34 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:29:34 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:29:34 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:29:54 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 01:29:54 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:29:54 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:29:54 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:29:54 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:29:54 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:29:54 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:29:54 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:29:54 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:29:54 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:29:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:29:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:29:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:29:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:29:57 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:29:57 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:29:57 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:29:57 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:29:57 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:29:57 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:29:57 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:29:57 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:29:57 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:29:57 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:29:58 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:29:58 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:29:58 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:29:58 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:30:06 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:30:06 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:30:06 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:30:06 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:30:06 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:30:06 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:30:06 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:30:06 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:30:06 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:30:06 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:30:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:30:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:30:09 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:30:09 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:30:09 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:30:09 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:30:09 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:30:09 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:30:09 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:30:09 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:30:09 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:30:09 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:30:09 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:30:09 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:30:10 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:30:10 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:30:10 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:30:10 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:31:42 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:31:42 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:31:42 | INFO     | api.app:initialize_game:634 - Generated session ID: a3d792c9-3874-47c6-ad04-f23ac2eb5788
2024-12-24 01:31:42 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:31:42 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:31:42 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:31:42 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:31:42 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: b0425551-9c44-4862-89f7-ff6ee4749900
2024-12-24 01:31:42 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:31:42 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:31:42 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:31:42 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:31:42 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:31:42 | ERROR    | api.app:initialize_game:668 - Error during game initialization: AgentManager.initialize_game() got an unexpected keyword argument 'session_id'
2024-12-24 01:31:42 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: AgentManager.initialize_game() got an unexpected keyword argument 'session_id'
2024-12-24 01:32:19 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:32:20 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:32:20 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:32:20 | INFO     | managers.agent_manager:stop_game:483 - Stopping game...
2024-12-24 01:32:20 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:32:20 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:32:20 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:32:20 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:32:20 | INFO     | managers.agent_manager:stop_game:491 - Game stopped successfully
2024-12-24 01:32:20 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:32:21 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:32:21 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:32:25 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:32:25 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:32:25 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:32:25 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:32:25 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:32:25 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:32:25 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:32:25 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:32:25 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:32:25 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:32:25 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:32:25 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:32:27 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:32:27 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:32:27 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:32:27 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:32:38 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:32:38 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:32:38 | INFO     | api.app:initialize_game:634 - Generated session ID: e8cf6724-870f-443c-be46-6f65ca397233
2024-12-24 01:32:38 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:32:38 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:32:38 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:32:38 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:32:38 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 00043e85-5a2d-4132-99cf-85a7d7fa5c55
2024-12-24 01:32:38 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:32:38 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:32:38 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:32:38 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:32:38 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:32:38 | INFO     | managers.agent_manager:initialize_game:336 - Initializing new game session with ID '%s'
2024-12-24 01:32:38 | ERROR    | managers.agent_manager:initialize_game:358 - Error during game initialization: %s
2024-12-24 01:32:38 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: StateManager.create_initial_state() got an unexpected keyword argument 'session_id'
2024-12-24 01:32:38 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: StateManager.create_initial_state() got an unexpected keyword argument 'session_id'
2024-12-24 01:32:43 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\state_manager.py'. Reloading...
2024-12-24 01:32:43 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:32:43 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:32:43 | INFO     | managers.agent_manager:stop_game:495 - Stopping game...
2024-12-24 01:32:43 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:32:43 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:32:43 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:32:43 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:32:43 | INFO     | managers.agent_manager:stop_game:503 - Game stopped successfully
2024-12-24 01:32:43 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:32:44 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:32:44 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:32:48 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:32:48 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:32:48 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:32:48 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:32:48 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:32:48 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:32:48 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:32:48 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:32:48 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:32:48 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:32:48 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:32:48 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:32:49 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:32:49 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:32:49 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:32:49 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:32:49 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:32:49 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:32:49 | INFO     | api.app:initialize_game:634 - Generated session ID: 4adbf2b0-34a5-450c-b1f5-b53c1962bb11
2024-12-24 01:32:49 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:32:49 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:32:49 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:32:49 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:32:49 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 0d0c3e29-8fda-417f-ba32-95819699c183
2024-12-24 01:32:49 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:32:49 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:32:49 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:32:49 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:32:49 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:32:49 | INFO     | managers.agent_manager:initialize_game:336 - Initializing new game session with ID '%s'
2024-12-24 01:32:49 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '%s'
2024-12-24 01:32:49 | ERROR    | managers.state_manager:create_initial_state:282 - Failed to create initial state: %s
2024-12-24 01:32:49 | ERROR    | managers.agent_manager:initialize_game:358 - Error during game initialization: %s
2024-12-24 01:32:49 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to create initial state: 1 validation error for GameState
source
  Input should be 'raw', 'processed' or 'error' [type=enum, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
2024-12-24 01:32:49 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to create initial state: 1 validation error for GameState
source
  Input should be 'raw', 'processed' or 'error' [type=enum, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
2024-12-24 01:35:06 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:35:06 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:35:06 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:35:06 | INFO     | managers.agent_manager:stop_game:495 - Stopping game...
2024-12-24 01:35:06 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:35:06 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:35:06 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:35:06 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:35:06 | INFO     | managers.agent_manager:stop_game:503 - Game stopped successfully
2024-12-24 01:35:06 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:35:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:35:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:35:10 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:35:10 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:35:10 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:35:10 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:35:10 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:35:10 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:35:10 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:35:10 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:35:10 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:35:10 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:35:10 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:35:10 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:35:11 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:35:11 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:35:11 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:35:11 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:36:55 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:36:55 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:36:55 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:36:55 | INFO     | managers.agent_manager:stop_game:538 - Stopping game...
2024-12-24 01:36:55 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:36:55 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:36:55 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:36:55 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:36:55 | INFO     | managers.agent_manager:stop_game:546 - Game stopped successfully
2024-12-24 01:36:55 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:36:56 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:36:56 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:37:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:37:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:37:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:37:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:37:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:37:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:37:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:37:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:37:00 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:37:00 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:37:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:37:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:37:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:37:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:37:17 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:37:18 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:37:18 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:37:18 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:37:18 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:37:18 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:37:18 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:37:18 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:37:18 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:37:18 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:37:18 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:37:18 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:22 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:37:22 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:22 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:37:22 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:37:22 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:37:22 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:37:22 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:37:22 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:37:22 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:37:22 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:37:22 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:37:22 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:37:23 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:37:23 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:37:23 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:37:23 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:37:49 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:37:49 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:37:49 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:37:49 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:37:49 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:37:49 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:37:49 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:37:49 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:37:49 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:37:49 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:37:50 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:37:50 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:37:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:37:53 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:37:53 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:37:53 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:37:53 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:37:53 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:37:53 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:37:53 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:37:53 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:37:53 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:37:53 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:37:54 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:37:54 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:37:54 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:37:54 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:38:01 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\narrator_agent.py'. Reloading...
2024-12-24 01:38:01 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:38:01 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:38:01 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:38:01 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:38:01 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:38:01 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:38:01 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:38:01 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:38:01 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:38:02 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:38:02 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:38:05 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:38:05 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:38:05 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:38:05 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:38:05 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:38:05 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:38:05 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:38:05 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:38:05 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:38:05 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:38:05 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:38:05 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:38:06 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:38:06 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:38:06 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:38:06 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:38:12 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\narrator_agent.py'. Reloading...
2024-12-24 01:38:13 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:38:13 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:38:13 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:38:13 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:38:13 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:38:13 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:38:13 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:38:13 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:38:13 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:38:13 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:38:13 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:38:19 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:38:19 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:38:19 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:38:19 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:38:19 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:38:19 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:38:19 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:38:19 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:38:19 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:38:19 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:38:19 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:38:19 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:38:20 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:38:20 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:38:20 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:38:20 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:39:03 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\narrator_agent.py'. Reloading...
2024-12-24 01:39:03 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:39:03 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:39:03 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:39:03 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:39:03 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:39:03 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:39:03 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:39:03 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:39:03 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:39:04 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:39:04 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:39:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:39:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:39:07 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:39:07 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:39:07 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:39:07 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:39:07 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:39:07 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:39:07 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:39:07 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:39:07 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:39:07 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:39:08 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:39:08 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:39:08 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:39:08 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:41:13 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:41:13 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:41:13 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:41:13 | INFO     | managers.agent_manager:stop_game:502 - Stopping game...
2024-12-24 01:41:13 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:41:13 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:41:13 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:41:13 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:41:13 | INFO     | managers.agent_manager:stop_game:510 - Game stopped successfully
2024-12-24 01:41:13 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:41:14 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:41:14 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:41:18 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:41:18 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:41:18 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:41:18 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:41:18 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:41:18 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:41:18 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:41:18 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:41:18 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:41:18 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:41:18 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:41:18 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:41:19 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:41:19 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:41:19 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:41:19 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:41:54 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'models\game_state.py'. Reloading...
2024-12-24 01:41:54 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:41:54 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:41:54 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:41:54 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:41:54 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:41:54 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:41:54 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:41:54 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:41:54 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:41:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:41:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:41:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:41:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:41:57 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:41:57 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:41:57 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:41:57 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:41:57 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:41:57 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:41:57 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:41:57 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:41:57 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:41:57 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:41:58 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:41:58 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:41:58 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:41:58 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:42:16 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:42:16 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:42:16 | INFO     | api.app:initialize_game:634 - Generated session ID: 15f572f5-2e66-4a8a-96c8-242d5a93b19d
2024-12-24 01:42:16 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:42:16 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:42:16 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:42:16 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:42:16 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: e82ba044-67bd-4b1f-9d91-67f4cb051622
2024-12-24 01:42:16 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:42:16 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:42:16 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:42:16 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:42:16 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:42:16 | DEBUG    | managers.agent_manager:_configure_story_graph:546 - Configuring story graph
2024-12-24 01:42:16 | DEBUG    | managers.agent_manager:_configure_story_graph:555 - Story graph configured successfully
2024-12-24 01:42:16 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:42:16 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:42:16 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:42:16 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:42:16 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 01:42:16 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 01:42:16 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 01:42:16 | INFO     | managers.workflow_manager:initialize_workflow:286 - Initializing workflow
2024-12-24 01:42:16 | DEBUG    | managers.workflow_manager:initialize_workflow:287 - Initial state: session_id='15f572f5-2e66-4a8a-96c8-242d5a93b19d' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 42, 16, 345218) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:42:16 | DEBUG    | managers.workflow_manager:initialize_workflow:290 - Saving initial state
2024-12-24 01:42:16 | INFO     | managers.workflow_manager:initialize_workflow:293 - Workflow initialization completed
2024-12-24 01:42:16 | ERROR    | managers.agent_manager:initialize_game:364 - Error during game initialization: %s
2024-12-24 01:42:16 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: WorkflowManager.execute_workflow() got an unexpected keyword argument 'story_graph'
2024-12-24 01:42:16 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: WorkflowManager.execute_workflow() got an unexpected keyword argument 'story_graph'
2024-12-24 01:42:46 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:42:46 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:42:46 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:42:46 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:42:46 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:42:46 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:42:46 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:42:46 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:42:46 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:42:46 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:42:46 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:42:46 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:42:49 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:42:49 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:42:49 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:42:49 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:42:49 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:42:49 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:42:49 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:42:49 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:42:49 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:42:49 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:42:49 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:42:49 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:42:50 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:42:50 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:42:50 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:42:50 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:43:37 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:43:37 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:43:37 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:43:37 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:43:37 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:43:37 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:43:37 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:43:37 | DEBUG    | managers.agent_manager:get_state:315 - Current state: %s
2024-12-24 01:43:37 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:43:37 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:43:37 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:43:37 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:43:42 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:43:42 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:43:42 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:43:42 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:43:42 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:43:42 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:43:42 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:43:42 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:43:42 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:43:42 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:43:42 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:43:42 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:43:44 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:43:44 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:43:44 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:43:44 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:43:55 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:43:56 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:43:56 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:43:56 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:43:56 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:43:56 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:43:56 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:43:56 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:43:56 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:43:56 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:43:56 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:43:56 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:44:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:44:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:44:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:44:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:44:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:44:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:44:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:44:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:44:00 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:44:00 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:44:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:44:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:44:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:44:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:44:01 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:44:01 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:44:01 | INFO     | api.app:initialize_game:634 - Generated session ID: 497ff694-f110-4c3e-a6ca-5fef0e339857
2024-12-24 01:44:01 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:44:01 | INFO     | managers.agent_manager:initialize:298 - Starting AgentManager initialization
2024-12-24 01:44:01 | INFO     | managers.agent_manager:_initialize_components:282 - Initializing manager components
2024-12-24 01:44:01 | DEBUG    | managers.agent_manager:_initialize_components:288 - Initializing state_manager
2024-12-24 01:44:01 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 9656a582-3fc1-4a1e-80ed-0e3385cc5252
2024-12-24 01:44:01 | INFO     | managers.agent_manager:initialize:304 - AgentManager initialization completed successfully
2024-12-24 01:44:01 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:44:01 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:44:01 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:44:01 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:44:01 | DEBUG    | managers.agent_manager:_configure_story_graph:546 - Configuring story graph
2024-12-24 01:44:01 | DEBUG    | managers.agent_manager:_configure_story_graph:555 - Story graph configured successfully
2024-12-24 01:44:01 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:44:01 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:44:01 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:44:01 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:44:01 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 01:44:01 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 01:44:01 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 01:44:01 | INFO     | managers.workflow_manager:initialize_workflow:286 - Initializing workflow
2024-12-24 01:44:01 | DEBUG    | managers.workflow_manager:initialize_workflow:287 - Initial state: session_id='497ff694-f110-4c3e-a6ca-5fef0e339857' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 44, 1, 539857) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:44:01 | DEBUG    | managers.workflow_manager:initialize_workflow:290 - Saving initial state
2024-12-24 01:44:01 | INFO     | managers.workflow_manager:initialize_workflow:293 - Workflow initialization completed
2024-12-24 01:44:01 | ERROR    | managers.agent_manager:initialize_game:364 - Error during game initialization: WorkflowManager.execute_workflow() got an unexpected keyword argument 'story_graph'
2024-12-24 01:44:01 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: WorkflowManager.execute_workflow() got an unexpected keyword argument 'story_graph'
2024-12-24 01:44:01 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: WorkflowManager.execute_workflow() got an unexpected keyword argument 'story_graph'
2024-12-24 01:44:34 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:44:34 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:44:34 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:44:34 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:44:34 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:44:34 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:44:34 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:44:34 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:44:34 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:44:34 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:44:35 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:44:35 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:40 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:44:40 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:40 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:44:40 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:44:40 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:44:40 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:44:40 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:44:40 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:44:40 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:44:40 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:44:40 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:44:40 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:44:41 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:44:41 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:44:41 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:44:41 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:44:45 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:44:45 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:44:45 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:44:45 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:44:45 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:44:45 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:44:45 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:44:45 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:44:45 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:44:45 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:44:46 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:44:46 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:50 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:44:50 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:44:50 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:44:50 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:44:50 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:44:50 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:44:50 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:44:50 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:44:50 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:44:50 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:44:50 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 01:44:50 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:44:51 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:44:51 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:44:51 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:44:51 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:46:15 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:46:15 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:46:15 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:46:15 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:46:15 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:46:15 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:46:15 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:46:15 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:46:15 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:46:15 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:46:15 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:46:15 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:46:19 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:46:19 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:46:19 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:46:19 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:46:19 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:46:19 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:46:19 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:46:19 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:46:19 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:46:19 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:46:19 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 01:46:19 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:46:20 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:46:20 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:46:20 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:46:20 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:47:04 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:47:04 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:47:04 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:47:04 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:47:04 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:47:04 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:47:04 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:47:04 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:47:04 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:47:04 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:47:04 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:47:04 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:47:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:47:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:47:07 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:47:07 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:47:07 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:47:07 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:47:07 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:47:07 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:47:07 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:47:07 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:47:07 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 01:47:07 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:47:08 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:47:08 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:47:08 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:47:08 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:47:14 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:47:15 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:47:15 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:47:15 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:47:15 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:47:15 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:47:15 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:47:15 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:47:15 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:47:15 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:47:16 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:47:16 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:47:19 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:47:19 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:47:19 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:47:19 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:47:19 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:47:19 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:47:19 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:47:19 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:47:19 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:47:19 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:47:19 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:47:19 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:47:20 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:47:20 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:47:20 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:47:20 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:50:16 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:50:16 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:50:16 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:50:16 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:50:16 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:50:16 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:50:16 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:50:16 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:50:16 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:50:16 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:50:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:50:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:50:22 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:50:22 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:50:22 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:50:22 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:50:22 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:50:22 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:50:22 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:50:22 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:50:22 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:50:22 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:50:22 | INFO     | managers.workflow_manager:__init__:29 - Initializing WorkflowManager
2024-12-24 01:50:22 | DEBUG    | managers.workflow_manager:__init__:32 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:50:23 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:50:23 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:50:23 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:50:23 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:51:05 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:51:05 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 01:51:05 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 01:51:05 | INFO     | managers.agent_manager:stop_game:501 - Stopping game...
2024-12-24 01:51:05 | DEBUG    | managers.agent_manager:get_state:313 - Fetching current game state
2024-12-24 01:51:05 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 01:51:05 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 01:51:05 | DEBUG    | managers.agent_manager:get_state:315 - Current state: None
2024-12-24 01:51:05 | INFO     | managers.agent_manager:stop_game:509 - Game stopped successfully
2024-12-24 01:51:05 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 01:51:06 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:51:06 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:51:15 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\agent_manager.py'. Reloading...
2024-12-24 01:51:15 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:51:15 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:52:29 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:52:29 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:52:29 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:52:54 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 01:52:54 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:52:54 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:52:57 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 01:52:57 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 01:52:57 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 01:52:57 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 01:52:57 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 01:52:57 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 01:52:57 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 01:52:57 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 01:52:57 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 01:52:57 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 01:52:57 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 01:52:57 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 01:52:58 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 01:52:58 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 01:52:58 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 01:52:58 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 01:57:54 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 01:57:54 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 01:57:54 | INFO     | api.app:initialize_game:634 - Generated session ID: 1a284f14-803f-4246-8998-4431d8aef5e6
2024-12-24 01:57:54 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 01:57:54 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 01:57:54 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 01:57:54 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 01:57:54 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 83c1eef5-4fe6-47e5-9c2b-7c4ddc4a97f9
2024-12-24 01:57:54 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 01:57:54 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 01:57:54 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 01:57:54 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 01:57:54 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 01:57:54 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 01:57:54 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 01:57:54 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 01:57:54 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 01:57:54 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 01:57:54 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 01:57:54 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 01:57:54 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 01:57:54 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 01:57:54 | INFO     | managers.workflow_manager:initialize_workflow:330 - Initializing workflow
2024-12-24 01:57:54 | DEBUG    | managers.workflow_manager:initialize_workflow:331 - Initial state: session_id='1a284f14-803f-4246-8998-4431d8aef5e6' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 57, 54, 427328) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 01:57:54 | DEBUG    | managers.workflow_manager:initialize_workflow:334 - Saving initial state
2024-12-24 01:57:54 | INFO     | managers.workflow_manager:initialize_workflow:337 - Workflow initialization completed
2024-12-24 01:57:54 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 01:57:54 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Input state: session_id='1a284f14-803f-4246-8998-4431d8aef5e6' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 1, 57, 54, 427328) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 01:57:54 | ERROR    | managers.workflow_manager:execute_workflow:262 - Error executing workflow: %s
2024-12-24 01:57:54 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: 'CompiledStateGraph' object has no attribute 'arun'
2024-12-24 01:57:54 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: 'CompiledStateGraph' object has no attribute 'arun'
2024-12-24 01:57:54 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: 'CompiledStateGraph' object has no attribute 'arun'
2024-12-24 02:00:05 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 02:00:05 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:00:05 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:00:05 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:00:05 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:00:05 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:00:05 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:00:05 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:00:05 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:00:05 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:00:06 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:00:06 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:00:11 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:00:11 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:00:11 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:00:11 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:00:11 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:00:11 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:00:11 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:00:11 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:00:11 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:00:11 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:00:11 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:00:11 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:00:12 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:00:12 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:00:12 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:00:12 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:00:24 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:00:24 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:00:24 | INFO     | api.app:initialize_game:634 - Generated session ID: 2a00d171-8b11-45ca-8e1d-4e2cedc59ea0
2024-12-24 02:00:24 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:00:24 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:00:24 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:00:24 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:00:24 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: efaa99c0-b5e9-405a-b502-6e4aa94926ff
2024-12-24 02:00:24 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:00:24 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:00:24 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:00:24 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:00:24 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:00:24 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:00:24 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:00:24 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:00:24 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:00:24 | INFO     | managers.workflow_manager:initialize_workflow:327 - Initializing workflow
2024-12-24 02:00:24 | DEBUG    | managers.workflow_manager:initialize_workflow:328 - Initial state: session_id='2a00d171-8b11-45ca-8e1d-4e2cedc59ea0' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 0, 24, 639772) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:00:24 | DEBUG    | managers.workflow_manager:initialize_workflow:331 - Saving initial state
2024-12-24 02:00:24 | INFO     | managers.workflow_manager:initialize_workflow:334 - Workflow initialization completed
2024-12-24 02:00:24 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 02:00:24 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Input state: session_id='2a00d171-8b11-45ca-8e1d-4e2cedc59ea0' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 0, 24, 639772) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:00:24 | DEBUG    | managers.workflow_manager:execute_workflow:240 - Executing workflow
2024-12-24 02:00:24 | INFO     | managers.workflow_manager:start_workflow:272 - Starting workflow node
2024-12-24 02:00:24 | ERROR    | managers.workflow_manager:start_workflow:285 - Error in start node: %s
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:00:24 | DEBUG    | managers.workflow_manager:execute_workflow:242 - Workflow execution result: {'node_start': {'session_id': '57314983-e50d-4d65-ae46-cac79ca7052a', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 0, 24, 753909), 'error': "'GameStateInput' object has no attribute 'state'"}}
2024-12-24 02:00:24 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section %d
2024-12-24 02:00:24 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:00:24 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:00:24 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section %d
2024-12-24 02:00:24 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section %d
2024-12-24 02:00:24 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:00:24 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:00:24 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:00:24 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:00:24 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:00:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:00:24 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:00:24 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:00:24 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:00:24 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section %d
2024-12-24 02:00:24 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:00:24 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section %d with LLM
2024-12-24 02:00:24 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:00:26 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:00:26 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameState but got %s
2024-12-24 02:00:26 | ERROR    | managers.workflow_manager:execute_workflow:259 - Error executing workflow: %s
2024-12-24 02:00:26 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:00:26 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:00:26 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:01:07 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\workflow_manager.py'. Reloading...
2024-12-24 02:01:07 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:01:07 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:01:07 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:01:07 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:01:07 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:01:07 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:01:07 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:01:07 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:01:07 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:01:08 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:01:08 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:01:12 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:01:12 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:01:12 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:01:12 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:01:12 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:01:12 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:01:12 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:01:12 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:01:12 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:01:12 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:01:12 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:01:12 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:01:13 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:01:13 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:01:13 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:01:13 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:03:27 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 02:03:27 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:03:27 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:03:27 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:03:27 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:03:27 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:03:27 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:03:27 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:03:27 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:03:27 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:03:28 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:03:28 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:03:32 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:03:32 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:03:32 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:03:32 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:03:32 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:03:32 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:03:32 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:03:32 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:03:32 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:03:32 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:03:32 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:03:32 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:03:34 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:03:34 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:03:34 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:03:34 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:03:36 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\narrator_agent.py'. Reloading...
2024-12-24 02:03:36 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:03:36 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:03:36 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:03:36 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:03:36 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:03:36 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:03:36 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:03:36 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:03:36 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:03:37 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:03:37 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:03:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:03:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:03:41 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:03:41 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:03:41 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:03:41 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:03:41 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:03:41 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:03:41 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:03:41 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:03:41 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:03:41 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:03:42 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:03:42 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:03:42 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:03:42 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:03:56 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:03:56 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:03:56 | INFO     | api.app:initialize_game:634 - Generated session ID: 34ed0107-97d7-42ce-8a1e-8ad056613f15
2024-12-24 02:03:56 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:03:56 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:03:56 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:03:56 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:03:56 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 043d604b-9e62-4530-8029-a41b2115f54d
2024-12-24 02:03:56 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:03:56 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:03:56 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:03:56 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:03:56 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:03:56 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:03:56 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:03:56 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:03:56 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:03:56 | INFO     | managers.workflow_manager:initialize_workflow:336 - Initializing workflow
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:initialize_workflow:337 - Initial state: session_id='34ed0107-97d7-42ce-8a1e-8ad056613f15' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 3, 56, 666761) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:initialize_workflow:340 - Saving initial state
2024-12-24 02:03:56 | INFO     | managers.workflow_manager:initialize_workflow:343 - Workflow initialization completed
2024-12-24 02:03:56 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Input state: session_id='34ed0107-97d7-42ce-8a1e-8ad056613f15' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 3, 56, 666761) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:execute_workflow:240 - Executing workflow
2024-12-24 02:03:56 | INFO     | managers.workflow_manager:start_workflow:272 - Starting workflow node
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:start_workflow:280 - No state provided, creating initial state
2024-12-24 02:03:56 | ERROR    | managers.workflow_manager:start_workflow:293 - Error in start node: StateManager.create_initial_state() missing 1 required positional argument: 'session_id'
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:03:56 | DEBUG    | managers.workflow_manager:execute_workflow:242 - Workflow execution result: {'node_start': {'session_id': 'e2a50ef3-815a-4b4b-a495-58666481cf90', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 3, 56, 678985), 'error': "StateManager.create_initial_state() missing 1 required positional argument: 'session_id'"}}
2024-12-24 02:03:56 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section %d
2024-12-24 02:03:56 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:03:56 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:03:56 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:03:56 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:03:56 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:03:56 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:03:56 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:03:56 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:03:56 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:03:56 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:03:56 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:03:56 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:03:56 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section %d
2024-12-24 02:03:56 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:03:56 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameState but got %s
2024-12-24 02:03:56 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:03:56 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:03:56 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:03:57 | ERROR    | managers.workflow_manager:execute_workflow:259 - Error executing workflow: %s
2024-12-24 02:03:57 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:03:57 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:03:57 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:07:39 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:07:39 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:07:39 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:07:39 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:07:39 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:07:39 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:07:39 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:07:39 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:07:39 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:07:39 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:07:40 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:07:40 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:07:43 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:07:43 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:07:43 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:07:43 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:07:43 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:07:43 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:07:43 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:07:43 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:07:43 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:07:43 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:07:43 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:07:43 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:07:44 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:07:44 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:07:44 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:07:44 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:09:47 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:09:47 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:09:47 | INFO     | api.app:initialize_game:634 - Generated session ID: 2f348c88-b4a0-4bcd-9118-92c052f049be
2024-12-24 02:09:47 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:09:47 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:09:47 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:09:47 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:09:47 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 785d877f-e7ac-4a5c-b002-3df957c99a6f
2024-12-24 02:09:47 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:09:47 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:09:47 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:09:47 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:09:47 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:09:47 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:09:47 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:09:47 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:09:47 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:09:47 | INFO     | managers.workflow_manager:initialize_workflow:336 - Initializing workflow
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:initialize_workflow:337 - Initial state: session_id='2f348c88-b4a0-4bcd-9118-92c052f049be' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 9, 47, 327992) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:initialize_workflow:340 - Saving initial state
2024-12-24 02:09:47 | INFO     | managers.workflow_manager:initialize_workflow:343 - Workflow initialization completed
2024-12-24 02:09:47 | INFO     | managers.workflow_manager:execute_workflow:215 - Starting workflow execution
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:execute_workflow:216 - Input state: session_id='2f348c88-b4a0-4bcd-9118-92c052f049be' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 9, 47, 327992) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:execute_workflow:240 - Executing workflow
2024-12-24 02:09:47 | INFO     | managers.workflow_manager:start_workflow:272 - Starting workflow node
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:start_workflow:280 - No state provided, creating initial state
2024-12-24 02:09:47 | ERROR    | managers.workflow_manager:start_workflow:293 - Error in start node: StateManager.create_initial_state() missing 1 required positional argument: 'session_id'
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:09:47 | DEBUG    | managers.workflow_manager:execute_workflow:242 - Workflow execution result: {'node_start': {'session_id': 'cfc73b38-ba38-45c8-90bb-2ff427ab02af', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 9, 47, 343723), 'error': "StateManager.create_initial_state() missing 1 required positional argument: 'session_id'"}}
2024-12-24 02:09:47 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section %d
2024-12-24 02:09:47 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:09:47 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:09:47 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:09:47 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:09:47 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:09:47 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:09:47 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:09:47 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:09:47 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:09:47 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:09:47 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:09:47 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:09:47 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section %d
2024-12-24 02:09:47 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:09:47 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameState but got %s
2024-12-24 02:09:47 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:09:47 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:09:47 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:09:48 | ERROR    | managers.workflow_manager:execute_workflow:259 - Error executing workflow: %s
2024-12-24 02:09:48 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:09:48 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:09:48 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:10:09 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 02:10:10 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:10:10 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:10:10 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:10:10 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:10:10 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:10:10 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:10:10 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:10:10 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:10:10 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:10:10 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:10:10 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:10:15 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:10:15 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:10:15 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:10:15 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:10:15 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:10:15 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:10:15 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:10:15 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:10:15 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:10:15 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:10:15 | INFO     | managers.workflow_manager:__init__:30 - Initializing WorkflowManager
2024-12-24 02:10:15 | DEBUG    | managers.workflow_manager:__init__:33 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:10:16 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:10:16 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:10:16 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:10:16 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:10:52 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:10:52 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:10:52 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:10:52 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:10:52 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:10:52 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:10:52 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:10:52 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:10:52 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:10:53 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:10:53 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:10:53 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:11:04 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:11:05 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:11:05 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:11:10 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:11:10 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:11:10 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:11:10 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:11:10 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:11:10 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:11:10 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:11:10 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:11:10 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:11:10 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:11:10 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:11:10 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:11:11 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:11:11 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:11:11 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:11:11 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:11:18 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:11:18 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:11:18 | INFO     | api.app:initialize_game:634 - Generated session ID: 3b46ebae-822d-4059-ac40-abc5556ddac6
2024-12-24 02:11:18 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:11:18 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:11:18 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:11:18 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:11:18 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: e7c3852f-5506-47f1-8f0a-577169f79a75
2024-12-24 02:11:18 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:11:18 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:11:18 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:11:18 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:11:18 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:11:18 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:11:18 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:11:18 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:11:18 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:11:18 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='3b46ebae-822d-4059-ac40-abc5556ddac6' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 11, 18, 161064) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:11:18 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:11:18 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='3b46ebae-822d-4059-ac40-abc5556ddac6' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 11, 18, 161064) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:11:18 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:11:18 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '%s'
2024-12-24 02:11:18 | ERROR    | managers.state_manager:create_initial_state:282 - Failed to create initial state: %s
2024-12-24 02:11:18 | ERROR    | managers.workflow_manager:start_workflow:298 - Error in start node: Failed to create initial state: models.game_state.GameState() got multiple values for keyword argument 'source'
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:11:18 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '64ce2d51-b888-46ee-8b17-e249480796d9', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 11, 18, 191368), 'error': "Failed to create initial state: models.game_state.GameState() got multiple values for keyword argument 'source'"}}
2024-12-24 02:11:18 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section %d
2024-12-24 02:11:18 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:11:18 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:11:18 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:11:18 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:11:18 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:11:18 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:11:18 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:11:18 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:11:18 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:11:18 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:11:18 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:11:18 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:11:18 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section %d
2024-12-24 02:11:18 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:11:18 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:11:18 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:11:18 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:11:18 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:11:18 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:11:18 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:11:18 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:11:18 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:12:11 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'agents\story_graph.py'. Reloading...
2024-12-24 02:12:11 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:12:11 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:12:11 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:12:11 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:12:11 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:12:11 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:12:11 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:12:11 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:12:11 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:12:12 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:12:12 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:12:16 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:12:16 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:12:16 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:12:16 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:12:16 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:12:16 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:12:16 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:12:16 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:12:16 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:12:16 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:12:16 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:12:16 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:12:17 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:12:17 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:12:17 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:12:17 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:13:04 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\state_manager.py'. Reloading...
2024-12-24 02:13:05 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:13:05 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:13:05 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:13:05 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:13:05 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:13:05 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:13:05 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:13:05 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:13:05 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:13:05 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:13:05 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:13:09 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:13:09 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:13:09 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:13:09 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:13:09 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:13:09 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:13:09 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:13:09 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:13:09 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:13:09 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:13:09 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:13:09 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:13:10 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:13:10 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:13:10 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:13:10 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:16:08 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:16:08 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:16:08 | INFO     | api.app:initialize_game:634 - Generated session ID: 5e9a6b1c-7def-47a9-b9c3-bead8700d0b3
2024-12-24 02:16:08 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:16:08 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:16:08 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:16:08 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:16:08 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 71614e5a-7c38-4544-b303-51e8a7fac7b8
2024-12-24 02:16:08 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:16:08 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:16:08 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:16:08 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:16:08 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:16:08 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:16:08 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:16:08 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:16:08 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:16:08 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='5e9a6b1c-7def-47a9-b9c3-bead8700d0b3' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 16, 8, 84002) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:16:08 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:16:08 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='5e9a6b1c-7def-47a9-b9c3-bead8700d0b3' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 16, 8, 84002) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:16:08 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:16:08 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '3420fbd7-f7ef-4b40-9e16-e2ead7692e09'
2024-12-24 02:16:08 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=3420fbd7-f7ef-4b40-9e16-e2ead7692e09
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='3420fbd7-f7ef-4b40-9e16-e2ead7692e09' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 16, 8, 103749) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='7b81cac2-930a-469e-aa3c-1cf5d54782c9' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 16, 8, 107391) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:16:08 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '7b81cac2-930a-469e-aa3c-1cf5d54782c9', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 16, 8, 107391)}}
2024-12-24 02:16:08 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:16:08 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:16:08 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:16:08 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:16:08 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:16:08 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:16:08 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:16:08 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:16:08 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:16:08 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:16:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:16:08 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:16:08 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:16:08 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:16:08 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:16:08 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:16:08 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:16:08 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:16:08 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:16:08 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:16:08 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:16:08 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:16:08 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:17:54 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:17:54 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:17:54 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:17:54 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:17:54 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:17:54 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:17:54 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:17:54 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:17:54 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:17:54 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:17:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:17:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:18:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:18:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:18:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:18:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:18:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:18:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:18:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:18:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:18:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:18:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:18:00 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:18:00 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:18:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:18:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:18:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:18:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:19:57 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:19:57 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:19:57 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:19:57 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:19:57 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:19:57 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:19:57 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:19:57 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:19:57 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:19:57 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:19:58 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:19:58 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:01 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:20:01 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:01 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:20:01 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:20:01 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:20:01 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:20:01 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:20:01 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:20:01 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:20:01 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:20:01 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:20:01 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:20:02 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:20:02 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:20:02 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:20:02 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:20:31 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:20:31 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:20:31 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:20:31 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:20:31 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:20:31 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:20:31 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:20:31 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:20:31 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:20:31 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:20:32 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:20:32 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:35 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:20:35 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:35 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:20:35 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:20:35 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:20:35 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:20:35 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:20:35 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:20:35 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:20:35 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:20:35 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:20:35 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:20:36 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:20:36 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:20:36 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:20:36 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:20:41 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:20:41 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:20:41 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:20:41 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:20:41 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:20:41 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:20:41 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:20:41 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:20:41 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:20:41 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:20:42 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:20:42 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:20:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:20:45 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:20:45 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:20:45 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:20:45 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:20:45 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:20:45 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:20:45 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:20:45 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:20:45 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:20:45 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:20:45 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:20:45 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:20:45 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:20:45 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:21:16 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:21:16 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:21:16 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:21:16 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:21:16 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:21:16 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:21:16 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:21:16 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:21:16 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:21:16 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:21:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:21:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:21:20 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:21:20 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:21:20 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:21:20 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:21:20 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:21:20 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:21:20 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:21:20 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:21:20 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:21:20 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:21:20 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:21:20 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:21:21 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:21:21 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:21:21 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:21:21 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:21:41 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:21:41 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:21:41 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:21:41 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:21:41 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:21:41 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:21:41 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:21:41 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:21:41 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:21:41 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:21:42 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:21:42 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:21:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:21:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:21:45 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:21:45 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:21:45 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:21:45 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:21:45 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:21:45 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:21:45 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:21:45 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:21:45 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:21:45 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:21:46 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:21:46 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:21:46 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:21:46 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:22:15 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:22:15 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:22:15 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:22:15 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:22:15 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:22:15 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:22:15 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:22:15 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:22:15 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:22:15 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:22:16 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:22:16 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:22:20 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:22:20 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:22:20 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:22:20 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:22:20 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:22:20 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:22:20 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:22:20 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:22:20 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:22:20 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:22:20 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:22:20 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:22:21 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:22:21 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:22:21 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:22:21 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:22:44 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:22:44 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:22:44 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:22:44 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:22:44 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:22:44 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:22:44 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:22:44 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:22:44 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:22:44 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:22:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:22:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:22:48 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:22:48 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:22:48 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:22:48 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:22:48 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:22:48 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:22:48 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:22:48 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:22:48 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:22:48 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:22:48 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:22:48 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:22:48 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:22:48 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:22:48 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:22:48 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:23:24 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:23:24 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:23:24 | INFO     | api.app:initialize_game:634 - Generated session ID: e2336a28-6386-445b-9343-eb0610196a1b
2024-12-24 02:23:24 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:23:24 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:23:24 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:23:24 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:23:24 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 302b63ca-9e23-4a14-9411-ab305319d8b0
2024-12-24 02:23:24 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:23:24 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:23:24 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:23:24 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:23:24 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:23:24 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:23:24 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:23:24 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:23:24 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:23:24 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='e2336a28-6386-445b-9343-eb0610196a1b' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 23, 24, 133169) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:23:24 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:23:24 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='e2336a28-6386-445b-9343-eb0610196a1b' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 23, 24, 133169) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:23:24 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:23:24 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '6ffea99d-e39c-4dd9-8a23-1f544bc430a8'
2024-12-24 02:23:24 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=6ffea99d-e39c-4dd9-8a23-1f544bc430a8
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='6ffea99d-e39c-4dd9-8a23-1f544bc430a8' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 23, 24, 147787) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='1860e62a-f979-4bc5-9e5b-a9ae7a592eef' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 23, 24, 152232) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:23:24 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '1860e62a-f979-4bc5-9e5b-a9ae7a592eef', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 23, 24, 152232)}}
2024-12-24 02:23:24 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:23:24 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:23:24 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:23:24 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:23:24 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:23:24 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:23:24 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:23:24 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:23:24 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:23:24 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:23:24 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:23:24 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:23:24 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:23:24 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:23:24 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:23:24 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:23:24 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:23:24 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:23:24 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:23:24 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:23:24 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:23:24 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:23:24 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:24:49 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:24:49 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:24:49 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:24:49 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:24:49 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:24:49 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:24:49 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:24:49 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:24:49 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:24:49 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:24:50 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:24:50 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:24:54 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:24:54 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:24:54 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:24:54 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:24:54 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:24:54 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:24:54 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:24:54 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:24:54 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:24:54 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:24:54 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:24:54 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:24:56 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:24:56 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:24:56 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:24:56 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:25:03 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:25:04 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:25:04 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:25:04 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:25:04 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:25:04 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:25:04 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:25:04 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:25:04 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:25:04 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:25:04 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:25:04 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:25:09 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:25:09 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:25:09 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:25:09 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:25:09 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:25:09 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:25:09 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:25:09 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:25:09 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:25:09 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:25:09 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:25:09 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:25:10 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:25:10 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:25:10 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:25:10 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:25:29 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:25:29 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:25:29 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:25:29 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:25:29 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:25:29 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:25:29 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:25:29 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:25:29 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:25:29 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:25:30 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:25:30 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:25:33 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:25:33 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:25:33 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:25:33 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:25:33 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:25:33 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:25:33 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:25:33 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:25:33 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:25:33 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:25:33 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:25:33 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:25:34 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:25:34 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:25:34 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:25:34 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:25:37 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:25:37 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:25:37 | INFO     | api.app:initialize_game:634 - Generated session ID: 8152f30d-2bb9-4ed9-8941-14da0dde5f8e
2024-12-24 02:25:37 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:25:37 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:25:37 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:25:37 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:25:37 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 66ec42af-8fea-4ff8-a340-e4d35fe6ab8e
2024-12-24 02:25:37 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:25:37 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:25:37 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:25:37 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:25:37 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:25:37 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:25:37 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:25:37 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:25:37 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:25:37 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='8152f30d-2bb9-4ed9-8941-14da0dde5f8e' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 25, 37, 232181) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:25:37 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:25:37 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='8152f30d-2bb9-4ed9-8941-14da0dde5f8e' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 25, 37, 232181) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:25:37 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:25:37 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '006b91d3-ba85-4564-b536-a9c8d9983982'
2024-12-24 02:25:37 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=006b91d3-ba85-4564-b536-a9c8d9983982
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='006b91d3-ba85-4564-b536-a9c8d9983982' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 25, 37, 242370) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='ef06cc4f-a84c-4d12-b656-c5dcfefe132f' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 25, 37, 244674) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:25:37 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': 'ef06cc4f-a84c-4d12-b656-c5dcfefe132f', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 25, 37, 244674)}}
2024-12-24 02:25:37 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:25:37 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:25:37 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:25:37 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:25:37 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:25:37 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:25:37 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:25:37 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:25:37 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:25:37 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:25:37 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:25:37 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:25:37 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:25:37 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:25:37 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:25:37 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:25:37 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:25:37 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:25:38 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:25:38 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:25:38 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:25:38 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:25:38 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:25:38 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:26:07 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:07 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:09 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-24 02:26:09 | DEBUG    | config.logging_config:log_env_variables:90 - Environment variables:
2024-12-24 02:26:09 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_HOST: None
2024-12-24 02:26:09 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_PORT: 8000
2024-12-24 02:26:09 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_RELOAD: None
2024-12-24 02:26:09 | DEBUG    | config.logging_config:log_env_variables:93 - LOG_LEVEL: DEBUG
2024-12-24 02:26:09 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-24 02:26:09 | INFO     | api.app:get_agent_manager:94 - Creating new AgentManager instance
2024-12-24 02:26:09 | DEBUG    | api.app:get_agent_manager:96 - Creating new GameFactory instance
2024-12-24 02:26:09 | DEBUG    | api.app:get_agent_manager:100 - Creating game components
2024-12-24 02:26:09 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:26:09 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:26:09 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:26:09 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:26:09 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:26:09 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:26:09 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:26:09 | DEBUG    | api.app:get_agent_manager:104 - Initializing AgentManager with components
2024-12-24 02:26:09 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:26:09 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:26:09 | INFO     | api.app:get_agent_manager:110 - AgentManager initialized successfully
2024-12-24 02:26:09 | DEBUG    | __main__:<module>:44 - Agent manager initialized successfully
2024-12-24 02:26:09 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:09 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:11 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:11 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:11 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:26:11 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:26:11 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:26:11 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:26:11 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:26:11 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:26:11 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:26:11 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:26:11 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:26:11 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:26:12 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:26:12 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:26:12 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:26:12 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:26:17 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:26:17 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:26:17 | INFO     | api.app:initialize_game:634 - Generated session ID: a35ead5a-c007-4ae4-b0af-0055271bb53e
2024-12-24 02:26:17 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:26:17 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:26:17 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:26:17 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:26:17 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: fed138e7-5bb1-4c5f-bba0-62fa514b7a54
2024-12-24 02:26:17 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:26:17 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:26:17 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:26:17 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:26:17 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:26:17 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:26:17 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:26:17 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:26:17 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:26:17 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='a35ead5a-c007-4ae4-b0af-0055271bb53e' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 26, 17, 136901) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:26:17 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:26:17 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='a35ead5a-c007-4ae4-b0af-0055271bb53e' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 26, 17, 136901) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:26:17 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:26:17 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session 'a84fbb11-0ff5-4ecd-b4d2-8587347c68dd'
2024-12-24 02:26:17 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=a84fbb11-0ff5-4ecd-b4d2-8587347c68dd
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='a84fbb11-0ff5-4ecd-b4d2-8587347c68dd' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 26, 17, 149633) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='0c4d687a-db18-4a9b-ad5c-238f05b38e65' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 26, 17, 153678) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:26:17 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '0c4d687a-db18-4a9b-ad5c-238f05b38e65', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 26, 17, 153678)}}
2024-12-24 02:26:17 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:26:17 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:26:17 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:26:17 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:26:17 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:26:17 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:26:17 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:26:17 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:26:17 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:26:17 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:26:17 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:26:17 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:26:17 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:26:17 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:26:17 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:26:17 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:26:17 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:26:17 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:26:17 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:26:17 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:26:17 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:26:17 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:26:17 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:26:36 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'config\storage_config.py'. Reloading...
2024-12-24 02:26:36 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:26:36 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:26:36 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:26:36 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:26:36 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:26:36 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:26:36 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:26:36 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:26:36 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:26:37 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:37 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:41 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:26:41 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:26:41 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:26:41 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:26:41 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:26:41 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:26:41 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:26:41 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:26:41 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:26:41 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:26:42 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:26:42 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:26:42 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:26:42 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:26:44 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:26:44 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:26:44 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:26:44 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:26:44 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:26:44 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:26:44 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:26:44 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:26:44 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:26:44 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:26:45 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:45 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:48 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:26:48 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:26:48 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:26:48 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:26:48 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:26:48 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:26:48 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:26:48 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:26:48 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:26:48 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:26:48 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:26:48 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:26:49 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:26:49 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:26:49 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:26:49 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:27:21 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:27:22 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:27:22 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:27:22 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:27:22 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:27:22 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:27:22 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:27:22 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:27:22 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:27:22 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:27:22 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:27:22 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:27:25 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:27:25 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:27:25 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:27:25 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:27:25 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:27:25 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:27:25 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:27:25 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:27:25 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:27:25 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:27:25 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:27:25 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:27:26 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:27:26 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:27:26 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:27:26 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:27:30 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:27:30 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:27:30 | INFO     | api.app:initialize_game:634 - Generated session ID: 180a937c-3f00-460a-97fe-3f8ffb544ed2
2024-12-24 02:27:30 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:27:30 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:27:30 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:27:30 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:27:30 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: e61daedf-2b95-43bb-88fd-3fcde9ad66d1
2024-12-24 02:27:30 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:27:30 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:27:30 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:27:30 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:27:30 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:27:30 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:27:30 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:27:30 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:27:30 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:27:30 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='180a937c-3f00-460a-97fe-3f8ffb544ed2' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 27, 30, 207528) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:27:30 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:27:30 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='180a937c-3f00-460a-97fe-3f8ffb544ed2' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 27, 30, 207528) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:27:30 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:27:30 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session 'b5bac0a5-f3be-4643-8c3a-e50963b619a8'
2024-12-24 02:27:30 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=b5bac0a5-f3be-4643-8c3a-e50963b619a8
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='b5bac0a5-f3be-4643-8c3a-e50963b619a8' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 27, 30, 223000) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='8edbe4d5-f69d-4208-9dc1-b8e2023d3adc' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 27, 30, 226078) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:27:30 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '8edbe4d5-f69d-4208-9dc1-b8e2023d3adc', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 27, 30, 226078)}}
2024-12-24 02:27:30 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:27:30 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:27:30 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:27:30 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:27:30 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:27:30 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:27:30 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:27:30 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:27:30 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:27:30 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:27:30 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:27:30 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:27:30 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:27:30 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:27:30 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:27:30 | DEBUG    | managers.narrator_manager:get_raw_content:78 - Found raw content for section 1
2024-12-24 02:27:30 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:27:30 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:27:31 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:27:31 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:27:31 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:27:31 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:27:31 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:27:31 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:28:43 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:28:43 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:28:43 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:28:43 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:28:43 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:28:43 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:28:43 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:28:43 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:28:43 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:28:43 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:28:44 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:28:44 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:28:47 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:28:47 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:28:47 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:28:47 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:28:47 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:28:47 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:28:47 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:28:47 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:28:47 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:28:47 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:28:47 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:28:47 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:28:48 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:28:48 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:28:48 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:28:48 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:29:01 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:29:01 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:29:01 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:29:01 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:29:01 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:29:01 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:29:01 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:29:01 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:29:01 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:29:01 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:29:01 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:01 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:05 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:05 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:05 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:29:05 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:29:05 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:29:05 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:29:05 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:29:05 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:29:05 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:29:05 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:29:05 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:29:05 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:29:06 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:29:06 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:29:06 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:29:06 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:29:13 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:29:13 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:29:13 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:29:13 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:29:13 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:29:13 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:29:13 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:29:13 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:29:13 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:29:13 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:29:13 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:13 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:17 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:29:17 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:29:17 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:29:17 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:29:17 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:29:17 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:29:17 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:29:17 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:29:17 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:29:17 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:29:18 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:29:18 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:29:18 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:29:18 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:29:19 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:29:19 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:29:19 | INFO     | api.app:initialize_game:634 - Generated session ID: 877bde85-3fd2-4480-af8f-aca2c7d0f3e3
2024-12-24 02:29:19 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:29:19 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:29:19 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:29:19 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:29:19 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 775e5332-a24a-4eed-ac14-352e262c03b3
2024-12-24 02:29:19 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:29:19 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:29:19 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:29:19 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:29:19 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:29:19 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:29:19 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:29:19 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:29:19 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:29:19 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='877bde85-3fd2-4480-af8f-aca2c7d0f3e3' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 29, 19, 600990) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:29:19 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:29:19 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='877bde85-3fd2-4480-af8f-aca2c7d0f3e3' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 29, 19, 600990) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:29:19 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:29:19 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '2ab04d49-0699-49c6-a148-198959845d3f'
2024-12-24 02:29:19 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=2ab04d49-0699-49c6-a148-198959845d3f
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='2ab04d49-0699-49c6-a148-198959845d3f' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 29, 19, 615049) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='708deef8-b99c-4cf0-baa9-1aa4be3d8112' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 29, 19, 617999) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:29:19 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '708deef8-b99c-4cf0-baa9-1aa4be3d8112', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 29, 19, 617999)}}
2024-12-24 02:29:19 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:29:19 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:29:19 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:29:19 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:29:19 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:29:19 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:29:19 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:29:19 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:29:19 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:29:19 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:29:19 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:29:19 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:29:19 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:29:19 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:29:19 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:29:19 | DEBUG    | managers.narrator_manager:get_raw_content:67 - Raw content exists check: True
2024-12-24 02:29:19 | DEBUG    | managers.narrator_manager:get_raw_content:80 - Raw content loaded: True
2024-12-24 02:29:19 | DEBUG    | managers.narrator_manager:get_raw_content:83 - Found raw content for section 1
2024-12-24 02:29:19 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:29:19 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:29:20 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:29:20 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:29:20 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:29:20 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:29:20 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:29:20 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:29:37 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\cache_manager.py'. Reloading...
2024-12-24 02:29:38 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:29:38 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:29:38 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:29:38 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:29:38 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:29:38 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:29:38 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:29:38 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:29:38 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:29:38 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:38 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:41 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:29:41 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:29:41 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:29:41 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:29:41 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:29:41 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:29:41 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:29:41 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:29:41 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:29:41 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:29:41 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:29:41 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:29:42 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:29:42 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:29:42 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:29:42 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:31:57 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:31:58 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:31:58 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:31:58 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:31:58 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:31:58 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:31:58 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:31:58 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:31:58 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:31:58 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:31:58 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:31:58 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:32:02 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:32:02 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:32:02 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:32:02 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:32:02 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:32:02 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:32:02 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:32:02 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:32:02 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:32:02 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:32:02 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:32:02 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:32:03 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:32:03 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:32:03 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:32:03 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:33:14 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:33:14 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:33:14 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:33:14 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:33:14 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:33:14 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:33:14 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:33:14 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:33:14 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:33:14 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:33:14 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:33:14 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:33:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:33:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:33:17 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:33:17 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:33:17 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:33:17 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:33:17 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:33:17 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:33:17 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:33:17 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:33:17 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:33:17 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:33:18 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:33:18 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:33:18 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:33:18 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:33:22 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:33:22 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:33:22 | INFO     | api.app:initialize_game:634 - Generated session ID: 194b8f6b-af82-4a04-adcd-98417800b0f5
2024-12-24 02:33:22 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:33:22 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:33:22 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:33:22 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:33:22 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 52e9ed06-f77a-4e06-8444-c8fd6650c0ed
2024-12-24 02:33:22 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:33:22 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:33:22 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:33:22 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:33:22 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:33:22 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:33:22 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:33:22 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:33:22 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:33:22 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='194b8f6b-af82-4a04-adcd-98417800b0f5' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 33, 22, 347630) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:33:22 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:33:22 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='194b8f6b-af82-4a04-adcd-98417800b0f5' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 33, 22, 347630) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:33:22 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:33:22 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session '8fcb7b59-d48c-447e-9722-b28cf1671ae1'
2024-12-24 02:33:22 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=8fcb7b59-d48c-447e-9722-b28cf1671ae1
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='8fcb7b59-d48c-447e-9722-b28cf1671ae1' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 33, 22, 361651) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='0758fc24-5f38-48e5-8e93-007fdcba967d' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 33, 22, 364174) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:33:22 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '0758fc24-5f38-48e5-8e93-007fdcba967d', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 33, 22, 364174)}}
2024-12-24 02:33:22 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:33:22 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:33:22 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:33:22 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:33:22 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:33:22 | INFO     | managers.narrator_manager:get_cached_content:39 - Getting cached content for section 1
2024-12-24 02:33:22 | DEBUG    | managers.narrator_manager:get_cached_content:46 - No content found in cache for section 1
2024-12-24 02:33:22 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:33:22 | INFO     | managers.narrator_manager:get_raw_content:61 - Getting raw content for section 1
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:33:22 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:33:22 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:33:22 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:33:22 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:33:22 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:33:22 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:33:22 | DEBUG    | managers.narrator_manager:get_raw_content:67 - Raw content exists check: True
2024-12-24 02:33:22 | DEBUG    | managers.narrator_manager:get_raw_content:80 - Raw content loaded: True
2024-12-24 02:33:22 | DEBUG    | managers.narrator_manager:get_raw_content:83 - Found raw content for section 1
2024-12-24 02:33:22 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:33:22 | DEBUG    | agents.narrator_agent:_process_content:100 - Starting content processing with LLM
2024-12-24 02:33:23 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:33:23 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:33:23 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:33:23 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:33:23 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:33:23 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:34:57 | WARNING  | logging:callHandlers:1736 - StatReload detected changes in 'managers\narrator_manager.py'. Reloading...
2024-12-24 02:34:57 | INFO     | api.app:lifespan:145 - Shutting down...
2024-12-24 02:34:57 | DEBUG    | api.app:shutdown_event:124 - Cleaning up AgentManager
2024-12-24 02:34:57 | INFO     | managers.agent_manager:stop_game:506 - Stopping game...
2024-12-24 02:34:57 | DEBUG    | managers.agent_manager:get_state:317 - Fetching current game state
2024-12-24 02:34:57 | DEBUG    | managers.state_manager:get_current_state:217 - Getting current state
2024-12-24 02:34:57 | DEBUG    | managers.state_manager:get_current_state:229 - No current state found
2024-12-24 02:34:57 | DEBUG    | managers.agent_manager:get_state:319 - Current state: None
2024-12-24 02:34:57 | INFO     | managers.agent_manager:stop_game:514 - Game stopped successfully
2024-12-24 02:34:57 | INFO     | api.app:shutdown_event:132 - API shutdown successfully
2024-12-24 02:34:58 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:34:58 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:35:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:35:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:35:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:35:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:35:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:35:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:35:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:35:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:35:00 | INFO     | managers.narrator_manager:__init__:29 - Initializing NarratorManager
2024-12-24 02:35:00 | DEBUG    | managers.narrator_manager:__init__:34 - NarratorManager initialized with config: %s
2024-12-24 02:35:00 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:35:00 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:35:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:35:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:35:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:35:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:35:57 | ERROR    | logging:callHandlers:1736 - Traceback (most recent call last):
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 707, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 678, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 2033, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
         ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 148, in __exit__
    next(self.gen)
    ~~~~^^^^^^^^^^
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\starlette\routing.py", line 700, in lifespan
    await receive()
  File "C:\Users\erpes\Desktop\casys-rpg\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.496.0_x64__qbz5n2kfra8p0\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

2024-12-24 02:54:17 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:54:17 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:57:55 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:57:55 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:57:57 | DEBUG    | __main__:<module>:28 - Loading .env from: C:\Users\erpes\Desktop\casys-rpg\.env
2024-12-24 02:57:57 | DEBUG    | config.logging_config:log_env_variables:90 - Environment variables:
2024-12-24 02:57:57 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_HOST: None
2024-12-24 02:57:57 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_PORT: 8000
2024-12-24 02:57:57 | DEBUG    | config.logging_config:log_env_variables:93 - CASYS_RELOAD: None
2024-12-24 02:57:57 | DEBUG    | config.logging_config:log_env_variables:93 - LOG_LEVEL: DEBUG
2024-12-24 02:57:57 | INFO     | __main__:<module>:39 - DÃ©marrage du serveur sur 127.0.0.1:8000
2024-12-24 02:57:57 | INFO     | api.app:get_agent_manager:94 - Creating new AgentManager instance
2024-12-24 02:57:57 | DEBUG    | api.app:get_agent_manager:96 - Creating new GameFactory instance
2024-12-24 02:57:57 | DEBUG    | api.app:get_agent_manager:100 - Creating game components
2024-12-24 02:57:57 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:57:57 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:57:57 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:57:57 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-24 02:57:57 | DEBUG    | managers.narrator_manager:__init__:32 - NarratorManager initialized with config: %s
2024-12-24 02:57:57 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:57:57 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:57:58 | DEBUG    | api.app:get_agent_manager:104 - Initializing AgentManager with components
2024-12-24 02:57:58 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:57:58 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:57:58 | INFO     | api.app:get_agent_manager:110 - AgentManager initialized successfully
2024-12-24 02:57:58 | DEBUG    | __main__:<module>:44 - Agent manager initialized successfully
2024-12-24 02:57:58 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:57:58 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:58:00 | INFO     | config.logging_config:setup_logging:74 - Logging system initialized
2024-12-24 02:58:00 | DEBUG    | config.logging_config:setup_logging:75 - Log level set to: DEBUG
2024-12-24 02:58:00 | INFO     | api.app:lifespan:141 - Starting up...
2024-12-24 02:58:00 | DEBUG    | api.app:startup_event:207 - Initializing GameFactory
2024-12-24 02:58:00 | DEBUG    | api.app:startup_event:211 - Creating game components
2024-12-24 02:58:00 | INFO     | managers.state_manager:__init__:36 - Initializing StateManager
2024-12-24 02:58:00 | INFO     | managers.rules_manager:__init__:29 - Initializing RulesManager
2024-12-24 02:58:00 | DEBUG    | managers.rules_manager:__init__:33 - RulesManager initialized with config: %s
2024-12-24 02:58:00 | INFO     | managers.narrator_manager:__init__:28 - Initializing NarratorManager
2024-12-24 02:58:00 | DEBUG    | managers.narrator_manager:__init__:32 - NarratorManager initialized with config: %s
2024-12-24 02:58:00 | INFO     | managers.workflow_manager:__init__:31 - Initializing WorkflowManager
2024-12-24 02:58:00 | DEBUG    | managers.workflow_manager:__init__:34 - WorkflowManager initialized with state_manager: %s, rules_manager: %s
2024-12-24 02:58:01 | DEBUG    | api.app:startup_event:216 - Initializing AgentManager
2024-12-24 02:58:01 | INFO     | managers.agent_manager:__init__:147 - Initializing AgentManager
2024-12-24 02:58:01 | INFO     | managers.agent_manager:__init__:162 - AgentManager initialization completed
2024-12-24 02:58:01 | INFO     | api.app:startup_event:223 - API started successfully
2024-12-24 02:58:08 | DEBUG    | api.app:get_agent_manager:112 - Returning existing AgentManager instance
2024-12-24 02:58:08 | INFO     | api.app:initialize_game:621 - Starting new game initialization
2024-12-24 02:58:08 | INFO     | api.app:initialize_game:634 - Generated session ID: 57fe213b-741f-4e1f-8fa3-f14bc4408803
2024-12-24 02:58:08 | DEBUG    | api.app:initialize_game:638 - Initializing game components
2024-12-24 02:58:08 | INFO     | managers.agent_manager:initialize:302 - Starting AgentManager initialization
2024-12-24 02:58:08 | INFO     | managers.agent_manager:_initialize_components:286 - Initializing manager components
2024-12-24 02:58:08 | DEBUG    | managers.agent_manager:_initialize_components:292 - Initializing state_manager
2024-12-24 02:58:08 | INFO     | managers.state_manager:initialize:48 - Initialized state manager with game ID: 1ed5b0c2-20d4-4433-8053-b0d561338e1d
2024-12-24 02:58:08 | INFO     | managers.agent_manager:initialize:308 - AgentManager initialization completed successfully
2024-12-24 02:58:08 | DEBUG    | api.app:initialize_game:640 - Game components initialized successfully
2024-12-24 02:58:08 | DEBUG    | api.app:initialize_game:643 - Processing initialization request
2024-12-24 02:58:08 | DEBUG    | api.app:initialize_game:648 - Processed init parameters: {'game_id': 'string', 'player_id': 'string', 'settings': {}}
2024-12-24 02:58:08 | DEBUG    | api.app:initialize_game:651 - Creating initial game state
2024-12-24 02:58:08 | DEBUG    | managers.agent_manager:_configure_story_graph:551 - Configuring story graph
2024-12-24 02:58:08 | DEBUG    | managers.agent_manager:_configure_story_graph:560 - Story graph configured successfully
2024-12-24 02:58:08 | INFO     | agents.story_graph:_setup_workflow:57 - Setting up LangGraph workflow with parallel processing
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_setup_workflow:61 - Created StateGraph with models
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_setup_workflow:71 - Adding workflow nodes
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_setup_workflow:80 - Defining conditional routing functions
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_setup_workflow:91 - Setting up workflow edges
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_setup_workflow:117 - Compiling workflow graph
2024-12-24 02:58:08 | INFO     | agents.story_graph:_setup_workflow:120 - LangGraph workflow setup completed successfully
2024-12-24 02:58:08 | INFO     | managers.workflow_manager:initialize_workflow:341 - Initializing workflow
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:initialize_workflow:342 - Initial state: session_id='57fe213b-741f-4e1f-8fa3-f14bc4408803' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 58, 8, 879509) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:initialize_workflow:345 - Saving initial state
2024-12-24 02:58:08 | INFO     | managers.workflow_manager:initialize_workflow:348 - Workflow initialization completed
2024-12-24 02:58:08 | INFO     | managers.workflow_manager:execute_workflow:216 - Starting workflow execution
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:execute_workflow:217 - Input state: session_id='57fe213b-741f-4e1f-8fa3-f14bc4408803' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 58, 8, 879509) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}, User input: None
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:execute_workflow:241 - Executing workflow
2024-12-24 02:58:08 | INFO     | managers.workflow_manager:start_workflow:273 - Starting workflow node
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:start_workflow:281 - No state provided, creating initial state
2024-12-24 02:58:08 | INFO     | managers.state_manager:create_initial_state:261 - Creating initial state for session 'a2b968a7-7d68-4cb2-8d3a-0d450da7b9ee'
2024-12-24 02:58:08 | DEBUG    | managers.state_manager:create_initial_state:273 - Initial state created: section=1, session=a2b968a7-7d68-4cb2-8d3a-0d450da7b9ee
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:start_workflow:288 - Created initial state: session_id='a2b968a7-7d68-4cb2-8d3a-0d450da7b9ee' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 58, 8, 893382) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None section_number=1 player_input=None content=None effects={} flags={}
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:start_workflow:294 - Returning output: session_id='899b238b-686f-4073-b9a4-3f1062910270' source=<SourceType.RAW: 'raw'> last_update=datetime.datetime(2024, 12, 24, 2, 58, 8, 895412) narrative=None rules=None trace=None character=None dice_roll=None decision=None error=None narrative_content=None current_rules=None current_decision=None
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:route_to_parallel:86 - Routing to parallel nodes: ['%s', '%s']
2024-12-24 02:58:08 | DEBUG    | managers.workflow_manager:execute_workflow:243 - Workflow execution result: {'node_start': {'session_id': '899b238b-686f-4073-b9a4-3f1062910270', 'source': <SourceType.RAW: 'raw'>, 'last_update': datetime.datetime(2024, 12, 24, 2, 58, 8, 895412)}}
2024-12-24 02:58:08 | INFO     | agents.story_graph:_process_rules:129 - Processing rules for section 1
2024-12-24 02:58:08 | DEBUG    | agents.rules_agent:process_section_rules:47 - Starting process_section_rules for section 1
2024-12-24 02:58:08 | INFO     | managers.rules_manager:get_cached_rules:37 - Getting cached rules for section 1
2024-12-24 02:58:08 | INFO     | agents.story_graph:_process_narrative:160 - Processing narrative for section 1
2024-12-24 02:58:08 | DEBUG    | agents.narrator_agent:process_section:48 - Starting process_section for section 1
2024-12-24 02:58:08 | INFO     | managers.narrator_manager:get_cached_content:37 - Getting cached content for section 1
2024-12-24 02:58:08 | DEBUG    | managers.narrator_manager:get_cached_content:44 - No content found in cache for section 1
2024-12-24 02:58:08 | DEBUG    | agents.narrator_agent:process_section:58 - No raw content provided, fetching from manager
2024-12-24 02:58:08 | INFO     | managers.narrator_manager:get_raw_content:66 - Getting raw content for section 1
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:290 - Parsing markdown content for section %d
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:309 - Parsed sections: %s
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:328 - Parsed metadata: %s
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:348 - Parsed analysis: %s
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:222 - Parsing choices from content
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:232 - Parsing choice: '%s'
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:248 - Parsed dice type: %s
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:265 - Parsed target section: %d
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_parse_choices:280 - Choice parsed successfully: '%s'
2024-12-24 02:58:08 | INFO     | managers.rules_manager:_parse_choices:285 - Successfully parsed %d choices
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:358 - Parsed %d choices
2024-12-24 02:58:08 | DEBUG    | managers.rules_manager:_markdown_to_rules:403 - Creating RulesModel with data: %s
2024-12-24 02:58:08 | INFO     | managers.rules_manager:_markdown_to_rules:415 - Successfully created RulesModel for section %d
2024-12-24 02:58:08 | INFO     | managers.rules_manager:get_cached_rules:50 - Successfully retrieved rules for section 1 from cache
2024-12-24 02:58:08 | INFO     | agents.rules_agent:process_section_rules:52 - Rules found in cache for section 1
2024-12-24 02:58:08 | DEBUG    | agents.story_graph:_process_rules:148 - Rules processing completed for section 1
2024-12-24 02:58:08 | DEBUG    | managers.narrator_manager:get_raw_content:72 - Raw content exists check: True
2024-12-24 02:58:08 | DEBUG    | managers.narrator_manager:get_raw_content:85 - Raw content loaded: True
2024-12-24 02:58:08 | DEBUG    | managers.narrator_manager:get_raw_content:88 - Found raw content for section 1
2024-12-24 02:58:08 | INFO     | agents.narrator_agent:process_section:66 - Processing content for section 1 with LLM
2024-12-24 02:58:08 | DEBUG    | agents.narrator_agent:_process_content:98 - Starting content processing with LLM
2024-12-24 02:58:09 | DEBUG    | agents.story_graph:_route_after_parallel:193 - Checking parallel processes completion
2024-12-24 02:58:09 | ERROR    | agents.story_graph:_route_after_parallel:195 - Expected GameStateOutput but got GameStateInput
2024-12-24 02:58:09 | ERROR    | managers.workflow_manager:execute_workflow:260 - Error executing workflow: %s
2024-12-24 02:58:09 | ERROR    | managers.agent_manager:initialize_game:369 - Error during game initialization: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:58:09 | ERROR    | api.app:initialize_game:668 - Error during game initialization: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
2024-12-24 02:58:09 | ERROR    | api.app:initialize_game:678 - Game error during initialization: Game initialization failed: Failed to initialize game: Failed to execute workflow: Branch did not return a valid destination
